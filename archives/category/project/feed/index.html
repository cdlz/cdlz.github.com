<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Only For Sunshine~ &#187; Project</title>
	<atom:link href="http://imzc.net/archives/category/project/feed/" rel="self" type="application/rss+xml" />
	<link>http://imzc.net</link>
	<description>-More Thinking,And Then Just do it~~~</description>
	<lastBuildDate>Sun, 30 Sep 2012 01:45:09 +0000</lastBuildDate>
	<language>zh-CN</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>http://wordpress.org/?v=3.4.2</generator>
		<item>
		<title>WordPress动态密码认证插件wp7版发布了~</title>
		<link>http://imzc.net/archives/273/</link>
		<comments>http://imzc.net/archives/273/#comments</comments>
		<pubDate>Sat, 14 Jul 2012 13:21:54 +0000</pubDate>
		<dc:creator>imzc</dc:creator>
				<category><![CDATA[Project]]></category>

		<guid isPermaLink="false">http://imzc.net/?p=273</guid>
		<description><![CDATA[经过几小时的努力，现在Wordpress动态密码认证插件wp7版发布了； 初版功能很简单，仅支持单个博客认证， [...]]]></description>
			<content:encoded><![CDATA[<p>经过几小时的努力，现在Wordpress动态密码认证插件wp7版发布了；<br />
初版功能很简单，仅支持单个博客认证，<a href="http://imzc.net/wp_otp/" target="_blank">使用方式</a>和ios版本的一致。<br />
文件下载（需要xx后才能部署）： <a href="http://imzc.net/wp-content/uploads/2012/07/wp_otp_xap.zip">wp_otp_xap</a></p>
<p>布局挫了点，先将就着吧~~~使用lumia800需要个wp7版本的。。。</p>
<p><a href="http://imzc.net/wp-content/uploads/2012/07/wp_otp_wp7.png"><img class="aligncenter size-full wp-image-277" title="wp_otp_wp7" src="http://imzc.net/wp-content/uploads/2012/07/wp_otp_wp7.png" alt="" width="364" height="701" /></a></p>
]]></content:encoded>
			<wfw:commentRss>http://imzc.net/archives/273/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
		<item>
		<title>worldpress插件编写-WP_OTP</title>
		<link>http://imzc.net/archives/202/</link>
		<comments>http://imzc.net/archives/202/#comments</comments>
		<pubDate>Sat, 11 Feb 2012 11:05:38 +0000</pubDate>
		<dc:creator>imzc</dc:creator>
				<category><![CDATA[IOSDev]]></category>
		<category><![CDATA[LAMP]]></category>
		<category><![CDATA[Project]]></category>

		<guid isPermaLink="false">http://imzc.net/?p=202</guid>
		<description><![CDATA[worldpress插件编写-WP_OTP,结合多个示例,理解后编写而成. 实际运行效果和介绍见:WP_OTP [...]]]></description>
			<content:encoded><![CDATA[<p>worldpress插件编写-WP_OTP,结合多个示例,理解后编写而成.<br />
实际运行效果和介绍见:<a href="http://imzc.net/wp_otp" target="_blank">WP_OTP</a></p><pre class="crayon-plain-tag">&lt;?php
 /*
 Plugin Name: OATH_OTP
 Plugin URI: http://imzc.net/wp_otp
 Version: 0.0.1
 Author: Richard Chou
 Description: OATH_OTP
 */
 
// error_reporting(E_ALL);

global $shakehand_key;
 
//20bit
$shakehand_key = get_option(&quot;shakehand_key&quot;);
   
//translate language, not completed.
if(!function_exists('tr')){
	function tr($str ,$section){
		return $str ;
	}
}


function auth_check($clientSideSha1Str){
	global $shakehand_key;
	//die($shakehand_key);
	$seed = time();
	$seed = $seed - $seed%30 ;
	//$clientSideSha1Str = sha1($code.$shakehand_key);
	$webSideSha1Str =sha1($seed.$shakehand_key);
	//echo &quot;====seed:$seed=====&quot;.$webSideSha1Str.&quot;,&quot;.$clientSideSha1Str.&quot;===&quot;;
	
	$clientSideCode = substr($clientSideSha1Str,0,6);
	$webSideCode = substr($webSideSha1Str,0,6);
	
	if($clientSideCode == $webSideCode ){
		return true;
	}else{
		return false;
	}
}
// this function adds captcha to the login form
function oath_login_form() {
	if( session_id() == &quot;&quot; )
		session_start();
	global $cptch_options;
	
	// captcha html - login form
	echo '&lt;p class=&quot;cptch_block&quot;&gt;';
	if( &quot;&quot; != $cptch_options['cptch_label_form'] )	
		echo '&lt;label&gt;'. stripslashes( $cptch_options['cptch_label_form'] ) .'&lt;/label&gt;&lt;br /&gt;';
	if( isset( $_SESSION['cptch_error'] ) ) {
		echo &quot;&lt;br /&gt;&lt;span style='color:red'&gt;&quot;. $_SESSION['cptch_error'] .&quot;&lt;/span&gt;&lt;br /&gt;&quot;;
		unset( $_SESSION['cptch_error'] );
	}
	echo '&lt;br /&gt;';
	oath_display_captcha();
	echo '&lt;/p&gt;
	&lt;br /&gt;';

	return true;

} //  end function oath_login_form

// this function checks captcha posted with a login
function oath_login_post($errors) {
	global $str_key;
	$str_key = &quot;123&quot;;
	// Delete errors, if they set
	if( isset( $_SESSION['cptch_error'] ) )
		unset( $_SESSION['cptch_error'] );

	if( isset( $_REQUEST['action'] ) &amp;&amp; 'register' == $_REQUEST['action'] )
		return($errors);

	// If captcha not complete, return error
	if ( isset( $_REQUEST['cptch_number'] ) &amp;&amp; &quot;&quot; ==  $_REQUEST['cptch_number'] ) {	
		return $errors.'&lt;strong&gt;'. tr( 'ERROR', 'captcha' ) .'&lt;/strong&gt;: '. tr( 'Please complete the CAPTCHA.', 'captcha' );
	}
 
	if(auth_check(trim($_REQUEST['cptch_number']))===true){
		// captcha was matched						
	} else {
		return $errors.'&lt;strong&gt;'. tr( 'ERROR', 'captcha' ) .'&lt;/strong&gt;: '. tr( 'That CAPTCHA was incorrect.', 'captcha' );
	}
  return($errors);
} // end function oath_login_post

// this function checks the captcha posted with a login when login errors are absent
function oath_login_check($url) {
	global $str_key;
	global $auth_tmp_key;
	if( session_id() == &quot;&quot; )
		session_start();

	$str_key = &quot;123&quot;;
	// Add error if captcha is empty
	if ( isset( $_REQUEST['cptch_number'] ) &amp;&amp; &quot;&quot; ==  $_REQUEST['cptch_number'] ) {
		$_SESSION['cptch_error'] = tr( 'Please complete the CAPTCHA.', 'captcha' );
		// Redirect to wp-login.php
		return $_SERVER[&quot;REQUEST_URI&quot;];
	}
	if ( isset( $_REQUEST['cptch_result'] ) &amp;&amp; isset( $_REQUEST['cptch_number'] ) ) {
		if(auth_check(trim($_REQUEST['cptch_number']))===true){
			return $url;		// captcha was matched						
		} else {
			// Add error if captcha is incorrect
			$_SESSION['cptch_error'] = tr('That CAPTCHA was incorrect.', 'captcha');
			// Redirect to wp-login.php
			return $_SERVER[&quot;REQUEST_URI&quot;];
		}
	}
	else {
		return $url;		// captcha was matched						
	}
} // end function oath_login_post



// Functionality of the captcha logic work
function oath_display_captcha()
{
	global $cptch_options,$auth_tmp_key ;
    global $shakehand_key;
	
	// String for display 
	$seed = time();
?&gt;
    OATH_OTP(&lt;?php echo substr(&quot;$seed&quot;,-3,3);?&gt;):&lt;input type=&quot;text&quot; name=&quot;cptch_number&quot; tabindex=&quot;30&quot; value=&quot;&quot; maxlength=&quot;10&quot; size=&quot;1&quot; style=&quot;width:100px;margin-bottom:0;display:inline;&quot; /&gt;&lt;br /&gt;
	&lt;input type=&quot;hidden&quot; name=&quot;cptch_result&quot; value=&quot; &lt;?php echo $auth_tmp_key; ?&gt;&quot; /&gt;&lt;input type=&quot;hidden&quot; value=&quot;Version: 0.0.1&quot; /&gt;
	 
&lt;?php
}
 

	add_action( 'login_form', 'oath_login_form' );
	add_filter( 'login_errors', 'oath_login_post' );
	add_filter( 'login_redirect', 'oath_login_check', 10, 3 ); 

  
  
// Function for display oather settings page in the admin area

function oather_activate() {
    add_option( 'shakehand_key',  &quot;testcoco&quot; );
    //这里也可以用update_option，区别是使用update_action会在每一次重新启用插件时重置用户设置为默认值。
	 
}
register_activation_hook(__FILE__, 'oather_activate');


function oather_admin_init(){
    //注册配置，第3个参数是回调函数，用于过滤提交的内容
	//register_setting( $option_group, $option_name, $sanitize_callback )
    register_setting( 'shakehand_key', 'oather_options', 'oather_options_validate' );
	
	 //添加设置群
	 //add_settings_section( $id, $title, $callback, $page ); 
    add_settings_section('oather_main', tr('Settings','oath'), 'oather_section', 'oather');
   
   //添加具体配置
    //add_settings_field( $id,                  $title,                               $callback,    $page,      $section,   $args );
    add_settings_field('oather_shakehand_key', tr('oather_shakehand_key','oath'), 'oather_authkey', 'oather', 'oather_main'); 
    
	 
}
add_action('admin_init', 'oather_admin_init');



function oather_authkey()
{
    $shakehand_key = get_option( 'shakehand_key' ); 
//	echo &quot;&lt;br&gt; $shakehand_key:&quot;;print_r($shakehand_key);
?&gt;&lt;input id=&quot;oather_shakehand_key&quot; name=&quot;oather_shakehand_key&quot; style=&quot;width:200px;&quot; maxlength=&quot;20&quot;  value=&quot;&lt;?php echo $shakehand_key;?&gt;&quot; /&gt;(6-20 chars)&lt;br /&gt;
&lt;?php
}



function oather_section($section){
	return $section;
}
function oather_options_validate($input) { 
    return $input;
}

function oather_options_page() {
?&gt;
    &lt;div class=&quot;wrap&quot;&gt;
        &lt;h2&gt;&lt;?php echo tr('OATH_OTP','oath'); ?&gt;&lt;/h2&gt;
        &lt;div class=&quot;narrow&quot;&gt;
            &lt;form action=&quot;options.php&quot; method=&quot;post&quot;&gt;
                &lt;p&gt;&lt;?php echo tr('OATH_OTP目前仅有ios配对客户端,使用时间戳和shakehandKey结合认证.','oath'); ?&gt;&lt;/p&gt;
                &lt;?php settings_fields('shakehand_key'); ?&gt;
                &lt;?php do_settings_sections('oather'); ?&gt;
                &lt;p class=&quot;submit&quot;&gt;
                    &lt;input name=&quot;submit&quot; type=&quot;submit&quot; class=&quot;button-primary&quot; value=&quot;&lt;?php echo tr('Save Changes','oath') ?&gt;&quot; /&gt;
                &lt;/p&gt;
            &lt;/form&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;?php
}
 
 //在设置页添加链接
function oather_menu() {
    add_options_page('OATH_OTP Settings',  tr('OATH_OTP','oath'), 'manage_options', 'oath_otp', 'oather_options_page');
}

function oather_action_links( $links, $file ) {
    if ( $file != plugin_basename( __FILE__ ))
        return $links;
    $settings_link = '&lt;a href=&quot;options-general.php?page=oath_otp&quot;&gt;Settings&lt;/a&gt;';
    array_unshift( $links, $settings_link );
    return $links;
    //在插件页添加链接
}
add_filter( 'plugin_action_links', 'oather_action_links',10,2);
add_action('admin_menu','oather_menu');



if(isset($_POST['oather_shakehand_key'])){
	//update post
	$shakehand_len = strlen($_POST['oather_shakehand_key']);
		if($shakehand_len &gt;=6  &amp;&amp; $shakehand_len &lt;=20){ 
		 	 update_option( 'shakehand_key', $_POST['oather_shakehand_key'] ,'', 'yes' ); 
               //  print_r($_POST);   
			 $message = __( &quot;Options saved.&quot;, 'oath' );
		}else{
			 $message = tr( &quot;Options save failed,shakehand_key must be in 6 to 20 chars.&quot;, 'oath' );
		 }
}
  


 ?&gt;</pre><p>&nbsp;</p>
]]></content:encoded>
			<wfw:commentRss>http://imzc.net/archives/202/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
		<item>
		<title>宽带拨号助手V1.3 for CQUPT with winXP</title>
		<link>http://imzc.net/archives/51/</link>
		<comments>http://imzc.net/archives/51/#comments</comments>
		<pubDate>Sun, 15 Nov 2009 00:56:00 +0000</pubDate>
		<dc:creator>imzc</dc:creator>
				<category><![CDATA[Project]]></category>
		<category><![CDATA[dailhelper]]></category>

		<guid isPermaLink="false">http://imzc.net/?action=show&#038;id=115</guid>
		<description><![CDATA[带拨号助手V1.3(重邮校园网+windowsXP通过) richardhc@2009.11.15. 增加:  [...]]]></description>
			<content:encoded><![CDATA[<p><strong>带拨号助手</strong><strong>V1.3(重邮校园网+windowsXP通过)<br />
</strong>richardhc@2009.11.15.</p>
<p>增加:</p>
<p>点击最小化可以到系统托盘区(可以实现断线自动重拨).</p>
<p>双击托盘图标可以恢复显示</p>
<p>右键单击托盘图标有弹出菜单.</p>
<p>[恢复窗口]:同双击一样</p>
<p>重邮Online:快捷方式打开Online主页</p>
<p>[断开计费]:断开外网连接并关闭程序</p>
<p>[关闭程序]:仅关闭程序,同主界面的x按钮</p>
<p>PS:</p>
<p>程序源码也一起放出,请在下方下载:</p>
<p><a href="http://download.csdn.net/user/richardhochou/uploads">http://download.csdn.net/detail/richardhochou/3658314</a></p>
<p><a href="http://imzc.net/wp-content/uploads/2009/11/dail.jpg"><img class="size-medium wp-image-92 alignleft" title="dail" src="http://imzc.net/wp-content/uploads/2009/11/dail-238x300.jpg" alt="" width="238" height="300" /></a></p>
]]></content:encoded>
			<wfw:commentRss>http://imzc.net/archives/51/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
		</item>
		<item>
		<title>Netkeeper For Linux(含源码)</title>
		<link>http://imzc.net/archives/52/</link>
		<comments>http://imzc.net/archives/52/#comments</comments>
		<pubDate>Wed, 16 Sep 2009 20:37:00 +0000</pubDate>
		<dc:creator>imzc</dc:creator>
				<category><![CDATA[Project]]></category>
		<category><![CDATA[Netkeeper]]></category>

		<guid isPermaLink="false">http://imzc.net/?action=show&#038;id=108</guid>
		<description><![CDATA[Netkeeper For Linux =================================== [...]]]></description>
			<content:encoded><![CDATA[<p>Netkeeper For Linux<br />
=========================================================<br />
+ Netkeeper Linux Login for Ubuntu9.04                                                                              +<br />
+    Generate by zc@imzc.net,http://imzc.net                                                                            +<br />
+    Thanks to yangchen(181158257),韵之飘(59077227).                                                        +<br />
+    重邮Online: http://hongyan.cqupt.edu.cn/cqupt/                                                                 +<br />
=========================================================<br />
Linux 下的 星空拨号支持<br />
基本思路:<br />
1.用xsupplicant实现802内网认证器.<br />
2.用生成动态用户名的配置文件 再调用pppoe拨号,实现外网认证.<br />
系统要求:<br />
安装有ras-pppoe,ubuntu9.04已预装,无需再装.<br />
Ubuntu8.10,ubuntu9.04测试通过.<br />
注意<br />
本程序只能运行在root用户下<br />
Ubuntu请用sudo -s -H命令切换到root用户.</p>
<p>说明:<br />
1.将下载的压缩包解压到任意位置，该目录我称为“$Netkeeper”;<br />
2.修改[$Netkeeper/install/xsupplicant.conf]文件,填写自己的内网帐号和密码.<br />
用户替换:012xxx 117,140,247行三处,密码替换:123xxx 141行<br />
3.运行[$Netkeeper/install/install_802_netkeeper]安装好802内网认证和外网认证.如果提 示&#8221;Command not found&#8221;,则需要给予执行权限.sudo chmod a+x install_802_netkeeper<br />
注意:在安装外网认证时会调用pppoeconf对PPPoE进行设置，此时必需按照流程成功设置才可以.<br />
4.修改程序目录里的Netkeeper.pppoe文件,将此文件里的user和password行删除(如果有的话)<br />
将网关IP添加到[$Netkeeper/dial]文件第9行对应位置.<br />
5.sudo ./dial<br />
6.运行sudo .hangup断开连接<br />
原理:调用poff挂断</p>
<p>tips:<br />
1.Linux下用pppoe拨号网卡设置必须设成DHCP自动获取模式，否则拨上号却无法ping通任何地址，可能是DNS的问题<br />
2.plog用于查询拨号记录<br />
3.手动添加内网路由表: 先将自己的网关添加到[$Netkeeper/ip_route]脚本gateway=后面,保存,然后运行即可.<br />
4.bug反映请Email我,zc@imzc.net.程序说明文件有我的QQ号.不解答能在google一搜就有的问题哈,谢谢! 重邮的请加Linux协会群,10841348,找richardhc即可.外校的朋友请注明一下.</p>
<p><strong><span style="color: #339966; font-size: medium;">PS:现在由于加的人多了点,联系我的话就邮件联系吧.一概不加Q老&#8230;希望理解.</span></strong><br />
5.请支持由红岩网校基于UCHOME开发的属于我们的社区<br />
重邮Online: http://hongyan.cqupt.edu.cn/cqupt/</p>
<hr size="2" /><span style="color: #0080ff;">HELP:</span></p>
<p><span style="color: #0080ff;">在不能上网的时候,可以看看按照下列步骤试试.<br />
</span></p>
<p><span style="color: #0080ff;">1.你的系统是不是ubuntu的.<br />
2.将dial文件中第19行dhclient #eth0改为dhclient eth0 试试(网卡若为eth1则为eth1).<br />
3.先上内网试试,看能不能使用.<br />
4.若确认你的账号和密码正确了的,且在windows下账号能上外网.<br />
5.删除/etc/ppp/peers/dsl-provider文件,重新install一次.按照说明文档的步骤来</span></p>
<hr size="2" />更新:<br />
不同地区的RADIUS可能会不同,需要自行在Netkeeper运行程序中查找,用一般的16进制编辑器就可以了(我用的是WinHex).可以不用OD.<br />
找到后,改动文件CXKUsername.cpp的12行RADIUS(&#8220;chongqingradius1&#8243;)中chongqingradius1<br />
部分.然后make即可.如果获取的MD5字符串错误,请检查编译环境.<br />
然后替换原来的程序即可.不用802.1认证内网的,就不用那个步骤了.﻿</p>
<p>源码:diallinux_v1.0_src_a.tar.gz<br />
程序:<br />
带802.1的:diallinux_bin_v1.0_20090916.tar.gz<br />
不带802.1的:netkeeper_no_802.1.zip</p>
<p>netkeeper_ubuntu_脚本20091205更新:<br />
./dial 内外网;<br />
./dail 802 仅内网;<br />
./dial net仅外网 ;<br />
./dial logout 挂断内外网;<br />
添加了DNS修改（加上了重邮教育网主DNS和电信次要DNS）<br />
下载：netkeeper_ubuntu_脚本20091205更新.tar.gz 替换原有文件即可。</p>
<p>本文提到的所有文件见csdn下载附件: <a href="http://u252.com/tq25n" title="http://u252.com/tq25n">http://u252.com/tq25n</a></p>
]]></content:encoded>
			<wfw:commentRss>http://imzc.net/archives/52/feed/</wfw:commentRss>
		<slash:comments>2</slash:comments>
		</item>
	</channel>
</rss>
