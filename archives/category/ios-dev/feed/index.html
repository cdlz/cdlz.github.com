<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Only For Sunshine~ &#187; IOSDev</title>
	<atom:link href="http://imzc.net/archives/category/ios-dev/feed/" rel="self" type="application/rss+xml" />
	<link>http://imzc.net</link>
	<description>-More Thinking,And Then Just do it~~~</description>
	<lastBuildDate>Thu, 20 Sep 2012 16:40:36 +0000</lastBuildDate>
	<language>zh-CN</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>http://wordpress.org/?v=3.4.2</generator>
		<item>
		<title>ios5实现访问通话记录(需越狱)</title>
		<link>http://imzc.net/archives/259/</link>
		<comments>http://imzc.net/archives/259/#comments</comments>
		<pubDate>Sun, 06 May 2012 06:42:55 +0000</pubDate>
		<dc:creator>imzc</dc:creator>
				<category><![CDATA[IOSDev]]></category>

		<guid isPermaLink="false">http://imzc.net/?p=259</guid>
		<description><![CDATA[ios5的通话记录都保存在一个sqlite db文件中: 可以用下面代码测试，能否访问到对应的db： [cra [...]]]></description>
			<content:encoded><![CDATA[<p>ios5的通话记录都保存在一个sqlite db文件中:</p>
<p>可以用下面代码测试，能否访问到对应的db：</p><pre class="crayon-plain-tag">-(IBAction)checkDBClick:(id)sender{
	NSFileManager *fileManager = [NSFileManager defaultManager]; 
	NSDirectoryEnumerator *dirnum = [[NSFileManager defaultManager] enumeratorAtPath: @&quot;/private/&quot;]; 
	NSString *nextItem = [NSString string]; 
	NSUInteger pos = 0;		
	uTextView.text  = @&quot;checkDBClick&quot;;	
	while( (nextItem = [dirnum nextObject])) {
		if ([[nextItem pathExtension] isEqualToString: @&quot;db&quot;] || 
			[[nextItem pathExtension] isEqualToString: @&quot;sqlitedb&quot;]) { 
			if ([fileManager isReadableFileAtPath:nextItem]) { 
				NSLog(@&quot;%@&quot;, nextItem); 
				pos++;
				NSString * tmp = [[NSString alloc] initWithFormat:@&quot;%@\nnext(%d):%@&quot;,uTextView.text,pos,nextItem];
				uTextView.text = tmp;
				
				[tmp release];
			} 
		} 
	}
}</pre><p>&nbsp;</p>
<p>ios5中，位于目录： /private/var/wireless/Library/CallHistory/call_history.db 下。由于ios5以后，所有程序运行在沙盒下，仅能访问程序自己的目录，以及有限的几个目录，故，在不越狱的情况下，是访问不到对应的数据的。程序中用到的telocation.db，来电归属地数据库，请直接google得到。<br />
PS：有谁能在不越狱的基础上，利用私有API或者其他方式获取到手机号的话，麻烦email我一下方法，多谢~~~<br />
假定已经获得了手机号码，可通过下述代码获取，并得到对应的归属地：</p><pre class="crayon-plain-tag">-(NSString *)getPhoneNumberLocation: (NSString * )phoneNum{
	//call area 
	
	NSString *teLocationDatabasePath = [[NSString alloc] initWithFormat:@&quot;%@/%@&quot;,[[NSBundle mainBundle] resourcePath], @&quot;telocation.db&quot;];
	BOOL dbFileExist = FALSE;
	NSMutableString * area = [[[NSMutableString alloc] autorelease] initWithString:@&quot;&quot;];
	
	NSFileManager *fileManager = [NSFileManager defaultManager]; 
	dbFileExist = [fileManager fileExistsAtPath:teLocationDatabasePath];
	[fileManager release]; 
	
	NSLog(@&quot;teLocationDatabasePath:%@&quot;,teLocationDatabasePath);
	
	if(dbFileExist) {
		if ([fileManager isReadableFileAtPath:teLocationDatabasePath]) {
			sqlite3 *database;
			if(sqlite3_open([teLocationDatabasePath UTF8String], &amp;database) == SQLITE_OK) {
				sqlite3_stmt *compiledStatement;
				NSString *sqlStatement = [NSString stringWithFormat:@&quot;SELECT * FROM mob_location WHERE _id='%@';&quot;,[phoneNum substringToIndex:7]];
				NSLog(@&quot;sql:%@&quot;,sqlStatement);
								
				
				int errorCode = sqlite3_prepare_v2(database, [sqlStatement UTF8String], -1, 
												   &amp;compiledStatement, NULL);
				if( errorCode == SQLITE_OK) {
					int count = 1;
					
					while(sqlite3_step(compiledStatement) == SQLITE_ROW) {
						// Read the data from the result row
						int numberOfColumns = sqlite3_column_count(compiledStatement);
						NSString *data;
						NSString *columnName;
						
						for (int i = 0; i &lt; numberOfColumns; i++) {
							columnName = [[NSString alloc] initWithUTF8String:
										  (char *)sqlite3_column_name(compiledStatement, i)];
							data = [[NSString alloc] initWithUTF8String:
									(char *)sqlite3_column_text(compiledStatement, i)];
							
							
							
							if ([columnName isEqualToString:@&quot;location&quot;]) { 
								[area appendString:data];
								
								NSLog(@&quot;%d:%@=&gt;%@&quot;,count,columnName,data);
							}
							[columnName release];
							[data release];
						}  
						count++;
					}
					
				}
				else {
					NSLog(@&quot;Failed to retrieve table&quot;);
					NSLog(@&quot;Error Code: %d&quot;, errorCode);
				}
				sqlite3_finalize(compiledStatement);
			}
		}
		
	}
	[teLocationDatabasePath release];
	NSLog(@&quot;area:%@&quot;,area);
	return area;
}

-(IBAction)getInfoClick:(id)sender{
	
#define DB_FILE  [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingPathComponent:@&quot;call_history.db&quot;]
	
	NSLog(@&quot;getInfoClick:%@&quot;,DB_FILE);
	uTextView.text = @&quot;getInfoClick:&quot;; 
	
	NSFileManager *fileManager = [NSFileManager defaultManager]; 	
	NSString *callHisoryDatabasePath = DB_FILE;//@&quot;/private/var/wireless/Library/CallHistory/call_history.db&quot;;
	BOOL callHistoryFileExist = FALSE;
	callHistoryFileExist = [fileManager fileExistsAtPath:callHisoryDatabasePath];
	//	[fileManager release];
	NSMutableArray *callHistory = [[NSMutableArray alloc] init];
	
	
	if(callHistoryFileExist) {
		NSLog(@&quot;path is exists...&quot;);
		if ([fileManager isReadableFileAtPath:callHisoryDatabasePath]) {
			NSLog(@&quot;path can read...&quot;);
			sqlite3 *database;
			if(sqlite3_open([callHisoryDatabasePath UTF8String], &amp;database) == SQLITE_OK) {
				sqlite3_stmt *compiledStatement;
				NSString *sqlStatement = [NSString stringWithString:@&quot;SELECT * FROM call;&quot;];
				
				int errorCode = sqlite3_prepare_v2(database, [sqlStatement UTF8String], -1, 
												   &amp;compiledStatement, NULL);
				if( errorCode == SQLITE_OK) {
					int count = 1;
					
					while(sqlite3_step(compiledStatement) == SQLITE_ROW) {
						// Read the data from the result row
						NSMutableDictionary *callHistoryItem = [[NSMutableDictionary alloc] init];
						int numberOfColumns = sqlite3_column_count(compiledStatement);
						NSString *data;
						NSString *columnName;
						
						for (int i = 0; i &lt; numberOfColumns; i++) {
							columnName = [[NSString alloc] initWithUTF8String:
										  (char *)sqlite3_column_name(compiledStatement, i)];
							data = [[NSString alloc] initWithUTF8String:
									(char *)sqlite3_column_text(compiledStatement, i)];
							
							
							if (![columnName isEqualToString:@&quot;date&quot;]) {
								[callHistoryItem setObject:data forKey:columnName];
							}
							else {
								
								NSDateFormatter* dateFormatter = [[NSDateFormatter alloc] init];
								[dateFormatter setDateFormat:@&quot;yyyy-MM-dd HH:mm:ss&quot;];
								[dateFormatter setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@&quot;H&quot;]];
								NSDate *currentDate = [NSDate dateWithTimeIntervalSince1970:[data intValue]]; 
								
								[callHistoryItem setObject: [dateFormatter stringFromDate:currentDate] forKey:columnName];
								
							}
							
						
							if ([columnName isEqualToString:@&quot;address&quot;]) {
								[callHistoryItem  setObject:[self getPhoneNumberLocation:data] forKey:@&quot;area&quot; ];
								
							}
							
							//[callHistoryItem setObject:data forKey:columnName];
							
							[columnName release];
							[data release];
						}
						[callHistory addObject:callHistoryItem];
						[callHistoryItem release];
						count++;
					}//end while
					NSMutableString * 	tmp = [[NSMutableString alloc] initWithString:uTextView.text];
					for (NSUInteger i=0; i&lt;callHistory.count; i++) {
						//NSLog(@&quot;%d:%@&quot;,i,[callHistory objectAtIndex:i]);
						NSMutableDictionary * data = [callHistory objectAtIndex:i]; 
						[tmp appendFormat:@&quot;%d:%@=&gt;%@\n&quot;,i,[data objectForKey:@&quot;address&quot;],[data objectForKey:@&quot;area&quot;]]; 
					}
					
					uTextView.text = tmp;
					[tmp release];
					
				}
				else {
					NSLog(@&quot;Failed to retrieve table&quot;);
					NSLog(@&quot;Error Code: %d&quot;, errorCode);
				}
				sqlite3_finalize(compiledStatement);
			}
		}
		
	}
	
	
	
}</pre><p></p>
]]></content:encoded>
			<wfw:commentRss>http://imzc.net/archives/259/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
		</item>
		<item>
		<title>btstack 蓝牙协议栈</title>
		<link>http://imzc.net/archives/250/</link>
		<comments>http://imzc.net/archives/250/#comments</comments>
		<pubDate>Fri, 13 Apr 2012 15:08:36 +0000</pubDate>
		<dc:creator>imzc</dc:creator>
				<category><![CDATA[IOSDev]]></category>

		<guid isPermaLink="false">http://imzc.net/?p=250</guid>
		<description><![CDATA[btstack 蓝牙协议栈，最近准备开发蓝牙相关的应用，搜索了下，btstack比较不错。 先放上google [...]]]></description>
			<content:encoded><![CDATA[<p>btstack 蓝牙协议栈，最近准备开发蓝牙相关的应用，搜索了下，btstack比较不错。</p>
<p>先放上googlecode官方路径和wiki，研究学习中。。。</p>
<p>http://code.google.com/p/btstack/</p>
<p>http://code.google.com/p/btstack/wiki/GettingStarted</p>
]]></content:encoded>
			<wfw:commentRss>http://imzc.net/archives/250/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
		<item>
		<title>Mac Lion下软件包管理工具</title>
		<link>http://imzc.net/archives/249/</link>
		<comments>http://imzc.net/archives/249/#comments</comments>
		<pubDate>Fri, 13 Apr 2012 14:41:23 +0000</pubDate>
		<dc:creator>imzc</dc:creator>
				<category><![CDATA[IOSDev]]></category>

		<guid isPermaLink="false">http://imzc.net/?p=249</guid>
		<description><![CDATA[Mac Lion虽然已经有appstore了，但是上面基本上找不到linux开源的一些软件，有源码时，也需要本 [...]]]></description>
			<content:encoded><![CDATA[<p>Mac Lion虽然已经有appstore了，但是上面基本上找不到linux开源的一些软件，有源码时，也需要本地编译安装。</p>
<p>为了便于管理，已经有比较好的工具了，推荐如下：</p>
<p>macports :  http://www.macports.org/</p>
<p>homebrew:  http://mxcl.github.com/homebrew/</p>
<p>http://blog.jjgod.org/2009/12/21/homebrew-package-management/</p>
]]></content:encoded>
			<wfw:commentRss>http://imzc.net/archives/249/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
		<item>
		<title>mac装xcode4.3后没有gcc等工具的解决办法</title>
		<link>http://imzc.net/archives/246/</link>
		<comments>http://imzc.net/archives/246/#comments</comments>
		<pubDate>Fri, 13 Apr 2012 14:14:39 +0000</pubDate>
		<dc:creator>imzc</dc:creator>
				<category><![CDATA[IOSDev]]></category>

		<guid isPermaLink="false">http://imzc.net/?p=246</guid>
		<description><![CDATA[最近需要用到gcc，make等工具，一般在安装xcode后就应该有了，但是装了xcode4.3后却没有。 网上 [...]]]></description>
			<content:encoded><![CDATA[<p>最近需要用到gcc，make等工具，一般在安装xcode后就应该有了，但是装了xcode4.3后却没有。</p>
<p>网上搜索了下：</p>
<blockquote><p>Apple announced Xcode 4.3 for OSX Lion and 4.4 for OSX Mountain Lion last week. The major difference is that Xcode no longer provide an installer which is good thing because you now could update Xcode with AppStore in the future, plus it is much easier to carry the development environment with you. However, there is a little problem with this new version of Xcode, is that all command line toolsets and compilers are not visible in terminal.</p></blockquote>
<p>真够悲催的。。。解决的方法：<br />
xcode Preferences &gt; Downloads &gt; Command Line Tools &gt; Install</p>
<p><a href="http://imzc.net/wp-content/uploads/2012/04/command_line_tools.png"><img class="alignnone size-full wp-image-247" title="command_line_tools" src="http://imzc.net/wp-content/uploads/2012/04/command_line_tools.png" alt="" width="932" height="626" /></a></p>
]]></content:encoded>
			<wfw:commentRss>http://imzc.net/archives/246/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
		<item>
		<title>ios不同View间传参方法</title>
		<link>http://imzc.net/archives/216/</link>
		<comments>http://imzc.net/archives/216/#comments</comments>
		<pubDate>Sun, 11 Mar 2012 12:54:24 +0000</pubDate>
		<dc:creator>imzc</dc:creator>
				<category><![CDATA[IOSDev]]></category>

		<guid isPermaLink="false">http://imzc.net/?p=216</guid>
		<description><![CDATA[不同View间传参方法，互相调用即可，通过内部函数和指针传递。 [crayon-505b48db4227c/] [...]]]></description>
			<content:encoded><![CDATA[<p>不同View间传参方法，互相调用即可，通过内部函数和指针传递。</p><pre class="crayon-plain-tag">@interface wordpress_otpViewController {}
-(void)setViewConfig:(NSString *)str;
end

@interface configViewController{
@public
wordpress_otpViewController * m_wpViewController;
}

-(void)setConfig:(NSString *)str;
end

======================
wordpress_otpViewController中调用：
configViewController * mconfigViewController =  [[configViewController alloc] initWithNibName:@&quot;configViewController&quot; bundle:[NSBundle mainBundle]];

mconfigViewController-&gt;m_wpViewController = self;

[mconfigViewController setConfig:@&quot;test&quot;];

[self.navigationController pushViewController:mconfigViewController animated:YES];

[mconfigViewController release];

=========================
configViewController 子view调用：
[m_wpViewController setViewConfig:@&quot;set&quot;];</pre><p>&nbsp;</p>
]]></content:encoded>
			<wfw:commentRss>http://imzc.net/archives/216/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
		<item>
		<title>IOS程序本地化支持-NSLocalizedString</title>
		<link>http://imzc.net/archives/214/</link>
		<comments>http://imzc.net/archives/214/#comments</comments>
		<pubDate>Sun, 11 Mar 2012 12:36:05 +0000</pubDate>
		<dc:creator>imzc</dc:creator>
				<category><![CDATA[IOSDev]]></category>

		<guid isPermaLink="false">http://imzc.net/?p=214</guid>
		<description><![CDATA[IOS程序本地化支持-NSLocalizedString 1.NewFile->Resource->Strin [...]]]></description>
			<content:encoded><![CDATA[<p>IOS程序本地化支持-NSLocalizedString<br />
1.NewFile->Resource->String Files，创建文件Localizable.strings：<br />
2.在Localization中，点击“+”，添加中文和英文资源文件。如下图：</p>
<p>3.在任何需要用NSString的地方使用: NSLocalizedString(@&#8221;OK&#8221;,@&#8221;")即可。<br />
  第一个参数为实际使用key，后一个可为空。<br />
4.将所有的需要本地化处理的字符串处理完后，通过终端，进入到当前工程目录。<br />
  使用genstrings 生成数据。<br />
  genstrings -o en.lproj/ ./*.m<br />
  genstrings -o zh-Hans.lproj/ ./*.m<br />
5.编辑对应文件夹的Localizable.strings下对应key-value值修改即可：<br />
英文：&#8221;OK&#8221; = &#8220;OK&#8221;;<br />
中文：&#8221;OK&#8221; = &#8220;确定&#8221;;<br />
如此即可完成程序的本地化工作~~~</p>
]]></content:encoded>
			<wfw:commentRss>http://imzc.net/archives/214/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
		<item>
		<title>xcode4.2手动创建UITableView</title>
		<link>http://imzc.net/archives/212/</link>
		<comments>http://imzc.net/archives/212/#comments</comments>
		<pubDate>Sun, 11 Mar 2012 12:23:31 +0000</pubDate>
		<dc:creator>imzc</dc:creator>
				<category><![CDATA[IOSDev]]></category>

		<guid isPermaLink="false">http://imzc.net/?p=212</guid>
		<description><![CDATA[xcode4.2手动创建UITableView 必须实现UITableViewDataSource，UITab [...]]]></description>
			<content:encoded><![CDATA[<p>xcode4.2手动创建UITableView</p>
<p>必须实现UITableViewDataSource，UITableViewDelegate  Delegate。</p>
<p>@interface wordpress_otpViewController : UIViewController&lt;UITableViewDataSource,UITableViewDelegate,TSAlertViewDelegate&gt;{</p>
<p>&nbsp;</p>
<p>UITableView *myTableView;</p>
<p>NSMutableArray *titleList;</p>
<p>}</p>
<p>详细实现：</p><pre class="crayon-plain-tag">@implementation xxxViewController


-(void)dealloc{
	
	[myTableView release];
	[titleList release];
	[mainTitle release];
	
}


-(void)createTableView{  
	//导航栏  0, 0, 320, 44
	//x1,y1 -&gt; x2,y2
    CGRect rect = CGRectMake(0.0f, 0.0f, 320.0f, 460.0f);  //CGRectMake(0.0f, 44.0f, 320.0f, 460.0f);  
    self.myTableView = [[UITableView alloc] initWithFrame:rect];  
    [myTableView setDelegate:self];  
    [myTableView setDataSource:self];  
	[myTableView setSeparatorStyle:UITableViewCellSeparatorStyleSingleLine];
	
	//find all blog in CFG_FILE; 
	NSMutableDictionary* dict =  [ [ NSMutableDictionary alloc ] initWithContentsOfFile:CFG_FILE];
	if (dict==nil) {
		self.titleList = [NSMutableArray arrayWithObjects: nil];
	}else{
		//得到词典的数量  
		int count = [dict count];  
		NSLog(@&quot;词典的数量为： %d&quot;,count);  
		
		if (count&gt;0) {
			self.titleList = [NSMutableArray arrayWithObjects:nil];
		}
		//得到词典中所有KEY值  
		NSEnumerator * enumeratorKey = [dict keyEnumerator];  
		
		//快速枚举遍历所有KEY的值  
		for (NSObject *object in enumeratorKey) {  
			NSLog(@&quot;遍历KEY的值: %@&quot;,object);  
			[self.titleList  addObject:object];
		}   
		
	}
    [self.view addSubview:self.myTableView];  
	
}  

#pragma mark - Table view data source  
//指定有多少个分区(Section)，默认为1  
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView  
{  
#warning Potentially incomplete method implementation.  
    // Return the number of sections.  
    return 1;  
}  


//指定每个分区中有多少行，默认为1  
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section  
{  
#warning Incomplete method implementation.  
    // Return the number of rows in the section.  
    return titleList.count;  
}  
//绘制Cell  
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath  
{   
    
	UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:kCellIdentifier];  
    if (cell == nil) {  
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:kCellIdentifier] autorelease];
		cell.accessoryType = UITableViewCellAccessoryDetailDisclosureButton;
    }  
	
    // Configure the cell...  
	
	cell.imageView.image=[UIImage imageNamed:@&quot;oath_otp.png&quot;];//未选cell时的图片 
	//	 cell.imageView.highlightedImage=[UIImage imageNamed:@&quot;bgimg.png&quot;];//选中cell后的图片 
	
	
	cell.textLabel.text  =[titleList objectAtIndex: [indexPath row]];
	
    return cell;  
}  

// Override to support conditional editing of the table view. 
//划动cell是否出现del按钮 
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath 
{ 
	// Return NO if you do not want the specified item to be editable. 
	NSLog(@&quot;del....&quot;);
	return YES; 
} 


//自定义划动时del按钮内容
- (NSString *)tableView:(UITableView *)tableView
titleForDeleteConfirmationButtonForRowAtIndexPath:(NSIndexPath *)indexPath{
	return NSLocalizedString(@&quot;DEL&quot;,@&quot;&quot;);
}

// Override to support editing the table view. 
//编辑状态 
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath 
{ 
	if (editingStyle == UITableViewCellEditingStyleDelete) { 
		// Delete the row from the data source 
		
		UITableViewCell * cell = [tableView cellForRowAtIndexPath:indexPath];  
		[self.titleList removeObject:cell.textLabel.text];
		NSLog(@&quot;delete data:%@&quot;,cell.textLabel.text); 
		[self deleteBlogByName:cell.textLabel.text];
		
		[tableView reloadData];
		
		
		//		[tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade]; 
	}    
	else if (editingStyle == UITableViewCellEditingStyleInsert) { 
		// Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view 
		return ;
	}   
	
} 

/* 
 // Override to support rearranging the table view. 
 - (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath 
 { 
 } 
 */  
/* 
 // Override to support conditional rearranging of the table view. 
 - (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath 
 { 
 // Return NO if you do not want the item to be re-orderable. 
 return YES; 
 } 
 */  
#pragma mark - Table view delegate  
//选中Cell响应事件  
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath  
{  
    // Navigation logic may go here. Create and push another view controller.   
	
	//选中后的反显颜色即刻消失
	[tableView deselectRowAtIndexPath:indexPath animated:YES];	
	
	UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath]; 
	
	NSLog(@&quot;%@&quot;,cell.textLabel.text);
	//加入新的控制器
	[self setConfigView:cell.textLabel.text];
	
}  

-(void)setConfigView:(NSString *)blogname{
	
	NSLog(@&quot;blogname:%@&quot;,blogname);
	configViewController * mconfigViewController =  [[configViewController alloc] initWithNibName:@&quot;configViewController&quot; bundle:[NSBundle mainBundle]];
	mconfigViewController-&gt;m_wpViewController = self;
	
	[mconfigViewController setShakeHandKeyCFGKey:blogname];
	
	[self.navigationController pushViewController:mconfigViewController animated:YES];
	
	
	[mconfigViewController release];
}</pre><p>&nbsp;</p>
]]></content:encoded>
			<wfw:commentRss>http://imzc.net/archives/212/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
		<item>
		<title>window-based手动添加导航栏</title>
		<link>http://imzc.net/archives/211/</link>
		<comments>http://imzc.net/archives/211/#comments</comments>
		<pubDate>Sun, 11 Mar 2012 12:15:53 +0000</pubDate>
		<dc:creator>imzc</dc:creator>
				<category><![CDATA[IOSDev]]></category>

		<guid isPermaLink="false">http://imzc.net/?p=211</guid>
		<description><![CDATA[xxxAppDelegate中改为： [crayon-505b48db43765/] &#160;]]></description>
			<content:encoded><![CDATA[<p>xxxAppDelegate中改为：</p><pre class="crayon-plain-tag">- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
	self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
	
//	self.viewController =  [ [wordpress_otpViewController alloc] initWithNibName:@&quot;wordpress_otpViewController&quot; bundle:nil];

	UINavigationController * nav =  [[UINavigationController alloc]initWithRootViewController:[[wordpress_otpViewController alloc] initWithNibName:@&quot;wordpress_otpViewController&quot; bundle:nil]];
	[self.window addSubview:nav.view];
	
	self.window.rootViewController = nav;//self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
}

//后续函数切换视图
	configViewController * mconfigViewController =  [[configViewController alloc] initWithNibName:@&quot;configViewController&quot; bundle:[NSBundle mainBundle]];
	mconfigViewController-&gt;m_wpViewController = self;
 
	[mconfigViewController setShakeHandKeyCFGKey:blogname];
 
//一定要为根视图控制器，pushViewController才会生效，才能切换。 对应手动弹出，为popViewController
//[self.navigationController popViewControllerAnimated:YES]
	[self.navigationController pushViewController:mconfigViewController animated:YES];
 
 
	[mconfigViewController release];</pre><p>&nbsp;</p>
]]></content:encoded>
			<wfw:commentRss>http://imzc.net/archives/211/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
		<item>
		<title>worldpress插件编写-WP_OTP</title>
		<link>http://imzc.net/archives/202/</link>
		<comments>http://imzc.net/archives/202/#comments</comments>
		<pubDate>Sat, 11 Feb 2012 11:05:38 +0000</pubDate>
		<dc:creator>imzc</dc:creator>
				<category><![CDATA[IOSDev]]></category>
		<category><![CDATA[LAMP]]></category>
		<category><![CDATA[Project]]></category>

		<guid isPermaLink="false">http://imzc.net/?p=202</guid>
		<description><![CDATA[worldpress插件编写-WP_OTP,结合多个示例,理解后编写而成. 实际运行效果和介绍见:WP_OTP [...]]]></description>
			<content:encoded><![CDATA[<p>worldpress插件编写-WP_OTP,结合多个示例,理解后编写而成.<br />
实际运行效果和介绍见:<a href="http://imzc.net/wp_otp" target="_blank">WP_OTP</a></p><pre class="crayon-plain-tag">&lt;?php
 /*
 Plugin Name: OATH_OTP
 Plugin URI: http://imzc.net/wp_otp
 Version: 0.0.1
 Author: Richard Chou
 Description: OATH_OTP
 */
 
// error_reporting(E_ALL);

global $shakehand_key;
 
//20bit
$shakehand_key = get_option(&quot;shakehand_key&quot;);
   
//translate language, not completed.
if(!function_exists('tr')){
	function tr($str ,$section){
		return $str ;
	}
}


function auth_check($clientSideSha1Str){
	global $shakehand_key;
	//die($shakehand_key);
	$seed = time();
	$seed = $seed - $seed%30 ;
	//$clientSideSha1Str = sha1($code.$shakehand_key);
	$webSideSha1Str =sha1($seed.$shakehand_key);
	//echo &quot;====seed:$seed=====&quot;.$webSideSha1Str.&quot;,&quot;.$clientSideSha1Str.&quot;===&quot;;
	
	$clientSideCode = substr($clientSideSha1Str,0,6);
	$webSideCode = substr($webSideSha1Str,0,6);
	
	if($clientSideCode == $webSideCode ){
		return true;
	}else{
		return false;
	}
}
// this function adds captcha to the login form
function oath_login_form() {
	if( session_id() == &quot;&quot; )
		session_start();
	global $cptch_options;
	
	// captcha html - login form
	echo '&lt;p class=&quot;cptch_block&quot;&gt;';
	if( &quot;&quot; != $cptch_options['cptch_label_form'] )	
		echo '&lt;label&gt;'. stripslashes( $cptch_options['cptch_label_form'] ) .'&lt;/label&gt;&lt;br /&gt;';
	if( isset( $_SESSION['cptch_error'] ) ) {
		echo &quot;&lt;br /&gt;&lt;span style='color:red'&gt;&quot;. $_SESSION['cptch_error'] .&quot;&lt;/span&gt;&lt;br /&gt;&quot;;
		unset( $_SESSION['cptch_error'] );
	}
	echo '&lt;br /&gt;';
	oath_display_captcha();
	echo '&lt;/p&gt;
	&lt;br /&gt;';

	return true;

} //  end function oath_login_form

// this function checks captcha posted with a login
function oath_login_post($errors) {
	global $str_key;
	$str_key = &quot;123&quot;;
	// Delete errors, if they set
	if( isset( $_SESSION['cptch_error'] ) )
		unset( $_SESSION['cptch_error'] );

	if( isset( $_REQUEST['action'] ) &amp;&amp; 'register' == $_REQUEST['action'] )
		return($errors);

	// If captcha not complete, return error
	if ( isset( $_REQUEST['cptch_number'] ) &amp;&amp; &quot;&quot; ==  $_REQUEST['cptch_number'] ) {	
		return $errors.'&lt;strong&gt;'. tr( 'ERROR', 'captcha' ) .'&lt;/strong&gt;: '. tr( 'Please complete the CAPTCHA.', 'captcha' );
	}
 
	if(auth_check(trim($_REQUEST['cptch_number']))===true){
		// captcha was matched						
	} else {
		return $errors.'&lt;strong&gt;'. tr( 'ERROR', 'captcha' ) .'&lt;/strong&gt;: '. tr( 'That CAPTCHA was incorrect.', 'captcha' );
	}
  return($errors);
} // end function oath_login_post

// this function checks the captcha posted with a login when login errors are absent
function oath_login_check($url) {
	global $str_key;
	global $auth_tmp_key;
	if( session_id() == &quot;&quot; )
		session_start();

	$str_key = &quot;123&quot;;
	// Add error if captcha is empty
	if ( isset( $_REQUEST['cptch_number'] ) &amp;&amp; &quot;&quot; ==  $_REQUEST['cptch_number'] ) {
		$_SESSION['cptch_error'] = tr( 'Please complete the CAPTCHA.', 'captcha' );
		// Redirect to wp-login.php
		return $_SERVER[&quot;REQUEST_URI&quot;];
	}
	if ( isset( $_REQUEST['cptch_result'] ) &amp;&amp; isset( $_REQUEST['cptch_number'] ) ) {
		if(auth_check(trim($_REQUEST['cptch_number']))===true){
			return $url;		// captcha was matched						
		} else {
			// Add error if captcha is incorrect
			$_SESSION['cptch_error'] = tr('That CAPTCHA was incorrect.', 'captcha');
			// Redirect to wp-login.php
			return $_SERVER[&quot;REQUEST_URI&quot;];
		}
	}
	else {
		return $url;		// captcha was matched						
	}
} // end function oath_login_post



// Functionality of the captcha logic work
function oath_display_captcha()
{
	global $cptch_options,$auth_tmp_key ;
    global $shakehand_key;
	
	// String for display 
	$seed = time();
?&gt;
    OATH_OTP(&lt;?php echo substr(&quot;$seed&quot;,-3,3);?&gt;):&lt;input type=&quot;text&quot; name=&quot;cptch_number&quot; tabindex=&quot;30&quot; value=&quot;&quot; maxlength=&quot;10&quot; size=&quot;1&quot; style=&quot;width:100px;margin-bottom:0;display:inline;&quot; /&gt;&lt;br /&gt;
	&lt;input type=&quot;hidden&quot; name=&quot;cptch_result&quot; value=&quot; &lt;?php echo $auth_tmp_key; ?&gt;&quot; /&gt;&lt;input type=&quot;hidden&quot; value=&quot;Version: 0.0.1&quot; /&gt;
	 
&lt;?php
}
 

	add_action( 'login_form', 'oath_login_form' );
	add_filter( 'login_errors', 'oath_login_post' );
	add_filter( 'login_redirect', 'oath_login_check', 10, 3 ); 

  
  
// Function for display oather settings page in the admin area

function oather_activate() {
    add_option( 'shakehand_key',  &quot;testcoco&quot; );
    //这里也可以用update_option，区别是使用update_action会在每一次重新启用插件时重置用户设置为默认值。
	 
}
register_activation_hook(__FILE__, 'oather_activate');


function oather_admin_init(){
    //注册配置，第3个参数是回调函数，用于过滤提交的内容
	//register_setting( $option_group, $option_name, $sanitize_callback )
    register_setting( 'shakehand_key', 'oather_options', 'oather_options_validate' );
	
	 //添加设置群
	 //add_settings_section( $id, $title, $callback, $page ); 
    add_settings_section('oather_main', tr('Settings','oath'), 'oather_section', 'oather');
   
   //添加具体配置
    //add_settings_field( $id,                  $title,                               $callback,    $page,      $section,   $args );
    add_settings_field('oather_shakehand_key', tr('oather_shakehand_key','oath'), 'oather_authkey', 'oather', 'oather_main'); 
    
	 
}
add_action('admin_init', 'oather_admin_init');



function oather_authkey()
{
    $shakehand_key = get_option( 'shakehand_key' ); 
//	echo &quot;&lt;br&gt; $shakehand_key:&quot;;print_r($shakehand_key);
?&gt;&lt;input id=&quot;oather_shakehand_key&quot; name=&quot;oather_shakehand_key&quot; style=&quot;width:200px;&quot; maxlength=&quot;20&quot;  value=&quot;&lt;?php echo $shakehand_key;?&gt;&quot; /&gt;(6-20 chars)&lt;br /&gt;
&lt;?php
}



function oather_section($section){
	return $section;
}
function oather_options_validate($input) { 
    return $input;
}

function oather_options_page() {
?&gt;
    &lt;div class=&quot;wrap&quot;&gt;
        &lt;h2&gt;&lt;?php echo tr('OATH_OTP','oath'); ?&gt;&lt;/h2&gt;
        &lt;div class=&quot;narrow&quot;&gt;
            &lt;form action=&quot;options.php&quot; method=&quot;post&quot;&gt;
                &lt;p&gt;&lt;?php echo tr('OATH_OTP目前仅有ios配对客户端,使用时间戳和shakehandKey结合认证.','oath'); ?&gt;&lt;/p&gt;
                &lt;?php settings_fields('shakehand_key'); ?&gt;
                &lt;?php do_settings_sections('oather'); ?&gt;
                &lt;p class=&quot;submit&quot;&gt;
                    &lt;input name=&quot;submit&quot; type=&quot;submit&quot; class=&quot;button-primary&quot; value=&quot;&lt;?php echo tr('Save Changes','oath') ?&gt;&quot; /&gt;
                &lt;/p&gt;
            &lt;/form&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;?php
}
 
 //在设置页添加链接
function oather_menu() {
    add_options_page('OATH_OTP Settings',  tr('OATH_OTP','oath'), 'manage_options', 'oath_otp', 'oather_options_page');
}

function oather_action_links( $links, $file ) {
    if ( $file != plugin_basename( __FILE__ ))
        return $links;
    $settings_link = '&lt;a href=&quot;options-general.php?page=oath_otp&quot;&gt;Settings&lt;/a&gt;';
    array_unshift( $links, $settings_link );
    return $links;
    //在插件页添加链接
}
add_filter( 'plugin_action_links', 'oather_action_links',10,2);
add_action('admin_menu','oather_menu');



if(isset($_POST['oather_shakehand_key'])){
	//update post
	$shakehand_len = strlen($_POST['oather_shakehand_key']);
		if($shakehand_len &gt;=6  &amp;&amp; $shakehand_len &lt;=20){ 
		 	 update_option( 'shakehand_key', $_POST['oather_shakehand_key'] ,'', 'yes' ); 
               //  print_r($_POST);   
			 $message = __( &quot;Options saved.&quot;, 'oath' );
		}else{
			 $message = tr( &quot;Options save failed,shakehand_key must be in 6 to 20 chars.&quot;, 'oath' );
		 }
}
  


 ?&gt;</pre><p>&nbsp;</p>
]]></content:encoded>
			<wfw:commentRss>http://imzc.net/archives/202/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
		<item>
		<title>UIView使用图片为背景和图片适应屏幕</title>
		<link>http://imzc.net/archives/190/</link>
		<comments>http://imzc.net/archives/190/#comments</comments>
		<pubDate>Sat, 11 Feb 2012 09:48:34 +0000</pubDate>
		<dc:creator>imzc</dc:creator>
				<category><![CDATA[IOSDev]]></category>

		<guid isPermaLink="false">http://imzc.net/?p=190</guid>
		<description><![CDATA[直接看代码吧~ [crayon-505b48db44996/] &#160;]]></description>
			<content:encoded><![CDATA[<p>直接看代码吧~</p><pre class="crayon-plain-tag">//set backgroud image 
UIImage * bg = [self scaleToSize:[UIImage imageNamed:@&quot;bgimg.png&quot;] size:CGSizeMake(340, 480)];
self.view.backgroundColor = [UIColor colorWithPatternImage:bg]; 

//缩放图片函数，这个从网上搜索而来
-(UIImage*)scaleToSize:(UIImage*)img size:(CGSize)size  
{  
    // 创建一个bitmap的context  
    // 并把它设置成为当前正在使用的context  
    UIGraphicsBeginImageContext(size);  
    
    // 绘制改变大小的图片  
    [img drawInRect:CGRectMake(0, 0, size.width, size.height)];  
    
    // 从当前context中创建一个改变大小后的图片  
    UIImage* scaledImage = UIGraphicsGetImageFromCurrentImageContext();  
    
    // 使当前的context出堆栈  
    UIGraphicsEndImageContext();  
    
    // 返回新的改变大小后的图片  
    return scaledImage;  
}</pre><p>&nbsp;</p>
]]></content:encoded>
			<wfw:commentRss>http://imzc.net/archives/190/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
	</channel>
</rss>
