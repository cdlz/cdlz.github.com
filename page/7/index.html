<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head profile="http://gmpg.org/xfn/11">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />

	<title>Only For Sunshine~ - Part 7</title>
	<link rel="alternate" type="application/rss+xml" title="RSS 2.0 - 所有文章" href="../../feed/index.html" />
	<link rel="alternate" type="application/rss+xml" title="RSS 2.0 - 所有评论" href="../../comments/feed/index.html" />
	<link rel="pingback" href="../../xmlrpc.php" />

	<!-- style START -->
	<link rel="stylesheet" href="../../wp-content/themes/elegant-box/style.css" type="text/css" media="screen" />
			<link rel="stylesheet" href="../../wp-content/themes/elegant-box/chinese.css" type="text/css" media="screen" />
		<!--[if IE]>
		<link rel="stylesheet" href="http://imzc.net/wp-content/themes/elegant-box/ie.css" type="text/css" media="screen" />
	<![endif]-->

	<!-- default style -->
			<link rel="stylesheet" href="../../wp-content/themes/elegant-box/styles/blue/default.css" type="text/css" media="screen" title="blue" />
		<link rel="stylesheet" href="../../wp-content/themes/elegant-box/styles/blue/global.css" type="text/css" media="screen" />
	
	<!-- others styles -->
	<link rel="stylesheet" href="../../wp-content/themes/elegant-box/styles/green/default.css" type="text/css" media="screen" title="green" />
	<link rel="stylesheet" href="../../wp-content/themes/elegant-box/styles/green/global.css" type="text/css" media="screen" />
	<link rel="stylesheet" href="../../wp-content/themes/elegant-box/styles/purple/default.css" type="text/css" media="screen" title="purple" />
	<link rel="stylesheet" href="../../wp-content/themes/elegant-box/styles/purple/global.css" type="text/css" media="screen" />
	<link rel="stylesheet" href="../../wp-content/themes/elegant-box/styles/brown/default.css" type="text/css" media="screen" title="brown" />
	<link rel="stylesheet" href="../../wp-content/themes/elegant-box/styles/brown/global.css" type="text/css" media="screen" />
	<link rel="stylesheet" href="../../wp-content/themes/elegant-box/styles/white/default.css" type="text/css" media="screen" title="white" />
	<link rel="stylesheet" href="../../wp-content/themes/elegant-box/styles/white/global.css" type="text/css" media="screen" />
	<link rel="stylesheet" href="../../wp-content/themes/elegant-box/styles/black/default.css" type="text/css" media="screen" title="black" />
	<link rel="stylesheet" href="../../wp-content/themes/elegant-box/styles/black/global.css" type="text/css" media="screen" />
	<!-- style END -->

	<!-- javascript START -->
			<script type="text/javascript" src="../../wp-content/themes/elegant-box/js/styleswitcher.js"></script>
		<script type="text/javascript" src="../../wp-content/themes/elegant-box/js/base.js"></script>
	<script type="text/javascript" src="../../wp-content/themes/elegant-box/js/menu.js"></script>
	<!-- javascript END -->

		<link rel='stylesheet' id='jquery.slimbox-css'  href='../../wp-content/plugins/slimbox/stylesheets/jquery.slimbox.css?ver=2.03' type='text/css' media='all' />
<link rel='stylesheet' id='wp-pagenavi-css'  href='../../wp-content/themes/elegant-box/pagenavi-css.css?ver=2.70' type='text/css' media='all' />
<script type='text/javascript' src='../../wp-includes/js/jquery/jquery.js?ver=1.7.2'></script>
<script type='text/javascript' src='../../wp-content/plugins/slimbox/javascript/jquery.slimbox.js?ver=2.03'></script>
<script type='text/javascript' src='../../wp-includes/js/json2.js?ver=2011-02-23'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var live_blogging = {"ajaxurl":"http:\/\/imzc.net\/wp-admin\/admin-ajax.php","update_effect":"top"};
/* ]]> */
</script>
<script type='text/javascript' src='../../wp-content/plugins/live-blogging/live-blogging.js?ver=3.4.1'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 3.4.1" />
<link rel='shortlink' href='http://wp.me/19waf' />

<!-- All in One SEO Pack 1.6.14.5 by Michael Torbert of Semper Fi Web Design[343,368] -->
<link rel="canonical" href="index.html" />
<!-- /all in one seo pack -->
<script type="text/javascript">
	jQuery(document).ready(function($){	
	    var select = $('a[href$=".bmp"],a[href$=".gif"],a[href$=".jpg"],a[href$=".jpeg"], a[href$=".png"],a[href$=".BMP"],a[href$=".GIF"],a[href$=".JPG"],a[href$=".JPEG"],a[href$=".PNG"]');
		select.slimbox();
	});
</script>

<link rel="stylesheet" href="../../wp-content/themes/elegant-box/wp-syntax.css" type="text/css" media="screen" />
</head>


<body>
	<!-- header START -->
	<div id="header">
		<div class="inner">
			<div class="content">
				<div class="caption">
					<h1 id="title"><a href="../../index.html" title="-More Thinking,And Then Just do it~~~">Only For Sunshine~</a></h1>
					<div id="tagline">-More Thinking,And Then Just do it~~~</div>
				</div>

				<!-- search box -->
									<form action="http://www.google.com/cse" id="search_box" method="get">
						<div id="searchbox">
							<input type="text" id="searchtxt" class="textfield" name="q" size="24" />
							<input type="hidden" name="cx" value="007838838681523399853:u4canb53vle" />
							<input type="hidden" name="ie" value="UTF-8" />
						</div>
					</form>
				<script type="text/javascript">
//<![CDATA[
	var searchbox = document.getElementById("searchbox");
	var searchtxt = document.getElementById("searchtxt");
	var tiptext = "请输入关键字...";
	if(searchtxt.value == "" || searchtxt.value == tiptext) {
		searchtxt.className += " searchtip";
		searchtxt.value = tiptext;
	}
	searchtxt.onfocus = function(e) {
		if(searchtxt.value == tiptext) {
			searchtxt.value = "";
			searchtxt.className = searchtxt.className.replace(" searchtip", "");
		}
	}
	searchtxt.onblur = function(e) {
		if(searchtxt.value == "") {
			searchtxt.className += " searchtip";
			searchtxt.value = tiptext;
		}
	}
//]]>
</script>

				<!-- navigation START -->
				<ul id="navigation">

					<li class="current_page_item"><a href="../../index.html">首页</a></li>
					<li class="page_item page-item-260"><a href="../../ios/index.html">IOS_PROJ</a></li>
<li class="page_item page-item-164"><a href="../../wp_otp/index.html">WP_OTP</a></li>
<li class="page_item page-item-180"><a href="../../vps-recommended/index.html">vps推荐</a></li>
<li class="page_item page-item-139"><a href="../../mysites/index.html">我的站点</a></li>
<li class="page_item page-item-2"><a href="../../aboutme/index.html">关于</a></li>
					<li id="subscribe">
						<a rel="external nofollow" title="订阅这个博客的文章" id="feed" href="../../feed/index.html"><img src="../../wp-content/themes/elegant-box/images/transparent.gif" alt="RSS 订阅" /></a>
													<ul>
								<li class="first"><a rel="external nofollow" title="订阅到有道" href="http://reader.youdao.com/b.do?url=http://imzc.net/feed/"> 有道</a></li>
								<li><a rel="external nofollow" title="订阅到鲜果" href="http://www.xianguo.com/subscribe.php?url=http://imzc.net/feed/"> 鲜果</a></li>
								<li><a rel="external nofollow" title="订阅到抓虾" href="http://www.zhuaxia.com/add_channel.php?url=http://imzc.net/feed/"> 抓虾</a></li>
								<li><a rel="external nofollow" title="订阅到 Google" href="http://fusion.google.com/add?feedurl=http://imzc.net/feed/">  Google</a></li>
								<li><a rel="external nofollow" title="订阅到 My Yahoo!" href="http://add.my.yahoo.com/rss?url=http://imzc.net/feed/">  My Yahoo!</a></li>
								<li><a rel="external nofollow" title="订阅到 newsgator" href="http://www.newsgator.com/ngs/subscriber/subfext.aspx?url=http://imzc.net/feed/">  newsgator</a></li>
								<li><a rel="external nofollow" title="订阅到 Bloglines" href="http://www.bloglines.com/sub/http://imzc.net/feed/">  Bloglines</a></li>
								<li><a rel="external nofollow" title="订阅到 哪吒" href="http://inezha.com/add?url=http://imzc.net/feed/">  哪吒</a></li>
							</ul>
											</li>

				</ul>
				<!-- navigation END -->

			</div>
		</div>
	</div>
	<!-- header END -->

	<div id="container">
		<div id="content">
			<div id="main">

					<div id="notice">
				<div class="inner">
											<img class="icon" src="../../wp-content/themes/elegant-box/images/transparent.gif" alt="notice" />
										<div class="content">本博客采用linode vps,欢迎合租,送VPN账号;联系QQ 21577035 ~</div>
					<div class="fixed"></div>
				</div>
			</div>
		
		
				<div class="post">
					<div class="title">
						<h2><a href="../../archives/55/index.html" rel="bookmark">用了新网关不能上内网的可以试试下面的命令.</a></h2>
						<div class="fixed"></div>
					</div>

					<div class="info">
						
						<span>2009年8月31日</span>
													<span> | 分类: <a href="../../archives/category/onthego/index.html" title="查看 OnTheGo 中的全部文章" rel="category tag">OnTheGo</a></span>
																			<span> | 标签: </span>
						
						<div class="fixed"></div>
					</div>

					<div class="content">
						<p><!--[CDATA[最近学校启用了新的计费系统,看来电信还是动作大啊!移动的什么时候可以到来捏?虽然TD手机现在不好,至少你的上网资费还是要降一下撒!>>> <a href='http://imzc.net/archives/55/' rel="nofollow">More</a></p>						<div class="fixed"></div>
					</div>

					<div class="comments">
						<span>评论关闭</span>											</div>
				</div>

		
				<div class="post">
					<div class="title">
						<h2><a href="http://imzc.net/archives/69/" rel="bookmark">php.ini和mysql中比较重要的几处设置</a></h2>
						<div class="fixed"></div>
					</div>

					<div class="info">
						
						<span>2009年8月31日</span>
													<span> | 分类: <a href="http://imzc.net/archives/category/lamp/" title="查看 LAMP 中的全部文章" rel="category tag">LAMP</a></span>
																			<span> | 标签: </span>
						
						<div class="fixed"></div>
					</div>

					<div class="content">
						<p>php.ini配置:<br />
#程序运行目录<br />
open_basedir =&#8221;D:\www;.&#8221;<br />
#禁止函数<br />
disable_functions = exec,system,popen,chroot,escapeshellarg,shell_exec,passthru,proc_open,proc_get_status<br />
#禁止类<br />
disable_classes = COM<br />
#禁止全局变量(非global那种)<br />
register_globals = Off<br />
#禁止动态加载DLL<br />
enable_dl = Off>>> <a href='http://imzc.net/archives/69/' rel="nofollow">More</a></p>						<div class="fixed"></div>
					</div>

					<div class="comments">
						<span>评论关闭</span>											</div>
				</div>

		
				<div class="post">
					<div class="title">
						<h2><a href="http://imzc.net/archives/70/" rel="bookmark">[原创]uchome登陆机制分析</a></h2>
						<div class="fixed"></div>
					</div>

					<div class="info">
						
						<span>2009年8月14日</span>
													<span> | 分类: <a href="http://imzc.net/archives/category/lamp/" title="查看 LAMP 中的全部文章" rel="category tag">LAMP</a></span>
																			<span> | 标签: </span>
						
						<div class="fixed"></div>
					</div>

					<div class="content">
						<p>uchome_ROOT/为uchome的根目录<br />
第一步:<br />
定位到uchome_ROOT/source/do_login.php,找到如下函数:>>> <a href='http://imzc.net/archives/70/' rel="nofollow">More</a></p>						<div class="fixed"></div>
					</div>

					<div class="comments">
						<span>评论关闭</span>											</div>
				</div>

		
				<div class="post">
					<div class="title">
						<h2><a href="http://imzc.net/archives/71/" rel="bookmark">[php]一个简单的将数转换为单个数字字符组成的字符串</a></h2>
						<div class="fixed"></div>
					</div>

					<div class="info">
						
						<span>2009年7月28日</span>
													<span> | 分类: <a href="http://imzc.net/archives/category/other/" title="查看 Other 中的全部文章" rel="category tag">Other</a></span>
																			<span> | 标签: </span>
						
						<div class="fixed"></div>
					</div>

					<div class="content">
						<p>/***************************************************<br />
*  获取显示的序号,1-3为特殊的<br />
* @params  $id为要显示的数字<br />
* @access<br />
* @return 含有图片的字符串<br />
** ZC ADD 2009-7-28<br />
***************************************************/<br />
function getRankImgDir($id){<br />
global $_SC;<br />
if($id&lt;=3){<br />
return &#8216;&lt;img src=&#8221;template/&#8217;.$_SC[template].&#8217;/img/num&#8217;.$id.&#8217;_1.gif&#8221; /&gt;&#8217;;<br />
}<br />
$str = &#8220;$id&#8221;;//借助于php自动转换的功能,不用去通过数学运算分拆数字<br />
$img = &#8220;&#8221;;<br />
for($i=0;$i&lt;strlen($str);$i++){<br />
$img .= &#8216;&lt;img src=&#8221;template/&#8217;.$_SC[template].&#8217;/img/num&#8217;.$str[$i].&#8217;.gif&#8221; /&gt;&#8217;;<br />
}<br />
return $img;<br />
}>>> <a href='http://imzc.net/archives/71/' rel="nofollow">More</a></p>						<div class="fixed"></div>
					</div>

					<div class="comments">
						<span>评论关闭</span>											</div>
				</div>

		
				<div class="post">
					<div class="title">
						<h2><a href="http://imzc.net/archives/62/" rel="bookmark">[转]一个最简的js和php通过月日获取星座的代码</a></h2>
						<div class="fixed"></div>
					</div>

					<div class="info">
						
						<span>2009年7月27日</span>
													<span> | 分类: <a href="http://imzc.net/archives/category/lamp/" title="查看 LAMP 中的全部文章" rel="category tag">LAMP</a></span>
																			<span> | 标签: </span>
						
						<div class="fixed"></div>
					</div>

					<div class="content">
						<p>js的:﻿>>> <a href='http://imzc.net/archives/62/' rel="nofollow">More</a></p>						<div class="fixed"></div>
					</div>

					<div class="comments">
						<span>评论关闭</span>											</div>
				</div>

		
				<div class="post">
					<div class="title">
						<h2><a href="http://imzc.net/archives/14/" rel="bookmark">[转]一个最简的js和php通过月日获取星座的代码</a></h2>
						<div class="fixed"></div>
					</div>

					<div class="info">
						
						<span>2009年7月27日</span>
													<span> | 分类: <a href="http://imzc.net/archives/category/other/" title="查看 Other 中的全部文章" rel="category tag">Other</a></span>
																			<span> | 标签: </span>
						
						<div class="fixed"></div>
					</div>

					<div class="content">
						<p><![CDATA[
<p>js的:>>> <a href='http://imzc.net/archives/14/' rel="nofollow">More</a></p>						<div class="fixed"></div>
					</div>

					<div class="comments">
						<span>评论关闭</span>											</div>
				</div>

		
				<div class="post">
					<div class="title">
						<h2><a href="http://imzc.net/archives/23/" rel="bookmark">assert()的作用</a></h2>
						<div class="fixed"></div>
					</div>

					<div class="info">
						
						<span>2009年7月16日</span>
													<span> | 分类: <a href="http://imzc.net/archives/category/c_cplusplus/" title="查看 C/C++ 中的全部文章" rel="category tag">C/C++</a></span>
																			<span> | 标签: </span>
						
						<div class="fixed"></div>
					</div>

					<div class="content">
						<p>assert(),即断言;<br />
一般可以用于调试阶段的出错处理.<br />
需要注意的是在release版本中,这个不起作用.<br />
头文件是 assert.h(C), cassert(c++) .>>> <a href='http://imzc.net/archives/23/' rel="nofollow">More</a></p>						<div class="fixed"></div>
					</div>

					<div class="comments">
						<span>评论关闭</span>											</div>
				</div>

		
				<div class="post">
					<div class="title">
						<h2><a href="http://imzc.net/archives/24/" rel="bookmark">C++部分内容练习(复习)</a></h2>
						<div class="fixed"></div>
					</div>

					<div class="info">
						
						<span>2009年7月13日</span>
													<span> | 分类: <a href="http://imzc.net/archives/category/c_cplusplus/" title="查看 C/C++ 中的全部文章" rel="category tag">C/C++</a></span>
																			<span> | 标签: <a href="http://imzc.net/archives/tag/c/" rel="tag">c</a></span>
						
						<div class="fixed"></div>
					</div>

					<div class="content">
						<p>练习部分有:const关键字,函数指针,内部类,初始化列表,>>> <a href='http://imzc.net/archives/24/' rel="nofollow">More</a></p>						<div class="fixed"></div>
					</div>

					<div class="comments">
						<span>评论关闭</span>											</div>
				</div>

		
				<div class="post">
					<div class="title">
						<h2><a href="http://imzc.net/archives/72/" rel="bookmark">Makefile的编写</a></h2>
						<div class="fixed"></div>
					</div>

					<div class="info">
						
						<span>2009年7月7日</span>
													<span> | 分类: <a href="http://imzc.net/archives/category/c_cplusplus/" title="查看 C/C++ 中的全部文章" rel="category tag">C/C++</a></span>
																			<span> | 标签: <a href="http://imzc.net/archives/tag/c/" rel="tag">c</a>, <a href="http://imzc.net/archives/tag/makefile/" rel="tag">makefile</a></span>
						
						<div class="fixed"></div>
					</div>

					<div class="content">
						<p>ae67906c912d9cbeee6135c51a1f5867009>>> <a href='http://imzc.net/archives/72/' rel="nofollow">More</a></p>						<div class="fixed"></div>
					</div>

					<div class="comments">
						<span>评论关闭</span>											</div>
				</div>

		
				<div class="post">
					<div class="title">
						<h2><a href="http://imzc.net/archives/45/" rel="bookmark">[转]VC6代码向VC2005升级时要注意的问题</a></h2>
						<div class="fixed"></div>
					</div>

					<div class="info">
						
						<span>2008年12月30日</span>
													<span> | 分类: <a href="http://imzc.net/archives/category/c_cplusplus/" title="查看 C/C++ 中的全部文章" rel="category tag">C/C++</a></span>
																			<span> | 标签: </span>
						
						<div class="fixed"></div>
					</div>

					<div class="content">
						<div>
<p>转自:互联网<br />
将以前的代码在vc2005下编译，经常会遇到类似如下的警告: warning C4996: &#8216;strcat&#8217; was  declared deprecated.  通常这类警告都是由于调用了字符串相关函数引起的。虽然这警告无伤大雅，仅仅只是说使用的函数已过时(deprecated)&amp;lt;需要用新的  函数来替代&amp;gt;,但看着实在别扭,且看看ms为什么要设置成这样。<br />
搜索了一下ms的网站，找到了结果。ms认为以前的c/c++库中有一部分函数不够安全，希望程序员可以使用他们的替代安全库(Safe  Library)来避免不必要的隐患。 整个原文请点击以下链接访问:Repel Attacks on Your Code with the  Visual Studio 2005 Safe C and C++ Libraries<br />
在网上搜索到的最常用的解决方案，那就是定义 _CRT_SECURE_NO_DEPRECATE 和  _SCL_SECURE_NO_DEPRECATE  来禁止vc2005对此产生警告(依然使用的是非安全库！显然并不是一个好的解决方案)。而且如果使用了ATL,则还需要定义  _ATL_SECURE_NO_DEPRECATE， 使用了MFC则需要定义  _AFX_SECURE_NO_DEPRECATE。然而尽管如此，更好的解决方案只需要定义一个宏  _CRT_SECURE_CPP_OVERLOAD_STANDARD_NAMES, 那么vc将会自动替换使用他们的Safe  Library来代替C/C++标准库(如strcat将被strcat_f来取代)。<br />
即使使用了_CRT_SECURE_CPP_OVERLOAD_STANDARD_NAMES，代码将依旧不够安全:(, 对此，ms提出了如下10点建议:<br />
1. 不要认为 strcpy_s 和 strncpy_s(  以及其他的字符串函数)(在空间不够的时候)会自动终止拷贝(truncate截断，不截断则意味着溢出).如果需要自动截断，请使用strncpy_s  (同时使用_TRUNCATE作为长度参数)。<br />
2. 记住fopen_s缺省是独占模式。如需共享使用文件，应该使用_sopen。<br />
3. 别忘了_dupenv_s, 它将比_getenv_s更容易使用，因为它能自动分配一个正确长度的内存(buffer)。<br />
4. 在scanf_s中小心参数顺序。<br />
5. 确定printf_s中格式字符串的正确。<br />
6. 使用_countof(x)来取代sizeof(x)/sizeof(element). _countof将会正确的计算元素个数，而且如果x是一个指针，编译器将会发出一个警告(来提醒程序员,仅针对C++编译)<br />
7. 记住所有的sizes(大小,非长度)都是使用characters(字符，unicode下一个字符占2个byte)作为单位，而不是bytes(字节).<br />
8. 记住所有的sizes(大小，非长度，缘由同上)包含了字符串结束符&#8217;\0&#8242;(即别忘了很多情况下size需要+1)。<br />
9. 调试的时候监视数据0xfd。 (在调试版本下)0xfd将会被填充在数据(buffer，通常是字符串)的结尾处。如果运行非你所愿，可能会得到一个长度错误。<br />
10. 检查所有的错误。 许多新函数相比旧函数,能返回(表示)错误信息(的数值)。<br />
今天在把以前的项目port到VC2005上来时，碰到了不少问题，大都和字符处理相关。VC2005中默认的字符处理函数都是调用双字节版本，而且直接在代码中输入的字符串都默认为双字节的。<br />
在项目的转换Log中发现这一段：The C/C++ compiler default settings have been  modified to be more compliant with ISO Standard C++. Included in those  changes are enforcing Standard C++ for loop scoping and supporting  wchar_t as a native type. These changes may cause existing code to no  longer compile without changes to the code or the compiler options with  which it is built.<br />
Standard C++  有要求wchar_t作为默认的字符类型吗？只好先在Project-&gt;Properties-&gt;Configuration  Properties-&gt;C/C++-&gt;Language中的选项&#8221;Treate wchar_t as Build-in  Type&#8221;设置为No<br />
还有一点就是VC2005的CRT用的是新版的Security-Enhanced Versions of CRT  Functions,有关字符串处理的相关函数都被建议用后缀加上&#8221;_s&#8221;的版本，这样的话，在从以前项目的转换中会出现一大堆的warnings，做好  的解决办法是：在预编译头文件中的任何include之前加入:<br />
//for Secure Template Overloads of Security-Enhanced Versions of CRT Functions<br />
#define _CRT_SECURE_CPP_OVERLOAD_STANDARD_NAMES 1<br />
定义这个宏就会默认使用Security-Enhanced CRT，即使你的代码中用的并不是加后缀_s的函数版本，因为它在库中使用了一个小技量：函数重载。<br />
但是即使你完全按照上面的做了，在编译代码的时候还是会出现一大堆烦人的warnings，你可能会说“我不是已经用新版的CRT了吗？”  是的，没错！那是在链接的时候做的，但是编译器在编译你的代码的时候并不清楚，它只认你上面写的是什么，没&#8221;xxx_s&#8221;;，就给你好看！不让它们出现有  两种办法，我们首先想到的就是可以在预编译头文件里加上#pragma warning (disable  <img src='http://imzc.net/wp-includes/images/smilies/icon_mad.gif' alt=':x' class='wp-smiley' /> xxx)，这样也不失为一个处理的办法。另外一个是VS2005自带MSDN中说明的办法，同上，在stdafx.h没include任何头文件之前  定义一个宏:<br />
//for no more warns about the Security-Enhanced Versions of CRT Functions<br />
#define _CRT_SECURE_NO_DEPRECATE<br />
【系统分析】【编译】【代码升级】升级到Visual C++ 2005库要注意事项<br />
Visual C++库的十项突破性变化&lt;/p&gt;&lt;p&gt;Visual C++ 2005库已经发生了一系列的变化，可能会对现有的程序有所影响，在升级到Visual C++ 2005之前，必须要确定程序中没有这些问题。<br />
1、参数的有效性<br />
在C运行时库中，加入了一些代码，以检查参数的有效性。例如：如果传递的目标缓冲区大小不足以strcpy使用&#8211;通常这是在冒安全风险，而新版本此时则   会调用一个非法参数处理程序。在release版中，会调用Dr.Watson；而在debug版中，会产生断言（assert），当然，只要程序中传递  的参数都是有效的，就不会有什么问题了。<br />
2、对非安全API的警告<br />
在Visual C++  2005中，CRT中的一组函数已不再建议使用，而应使用新提供的安全版本。大多数这些不建议使用的函数如果使用不当，将会导致缓冲区溢出或其他安全问  题，这些函数如：strcpy、strcat等等。这些函数新的安全版本都在函数名后加了一个_s后缀，以方便识别，如strcpy_s、  wcscpy_s、mbscpy_s、calloc_s和strcat_s这些函数。如果想继续使用老版本、非安全的函数，可在源代码开始处加  上#define value of  _CRT_SECURE_NO_DEPRECATE（此处value代表某一数值）；然而，还是建议大家升级代码使用新的安全函数。<br />
3、迭代器越界<br />
受检查的迭代器（checked iterators）和调试迭代器（debug  iterators）也因为安全的原因进行了相应的更新，如果迭代器越界，则相应会调用一个非法参数处理程序。再次提醒，可以通过抛出一个越界异常来避免  产生非法参数问题。在代码中加入#define value of  _SECURE_SCL_THROWS，并把value值设为1,这样就不会调用非法参数处理程序，而是产生一个异常了。也可以通过设置#defined  value of _SECURE_SCL值为零，关闭此迭代器检查，通常默认情况下，此选项是打开的。<br />
4、time_t类型<br />
time_t类型通常用于显示从1970年开始以来的秒数。直到Visual C++ 7.1（即Visual C++ .NET  2003），time_t类型都被定义为一个long，而到了Visual C++  2005中，已被定义为一个64位类型，可用于显示一直到3000年的时间了。<br />
5、链接到CRT<br />
托管应用程序现在不能静态链接到CRT。以往，在Visual C++ 7.0和7.1中（指Visual Studio .NET 2002与2003），可以生成静态链接到CRT的CLR程序，而在Visual Studio 2005却行不通。<br />
6、单线程CRT支持<br />
在Visual Studio 2005中，已经取消了单线程CRT支持。而且用发展的眼光来看，未来大多数的人还是愿意使用线程安全的多线程代码。&lt;br /&gt;在线程中，可使用_nolock后缀来优化代码，但同时，这些函数是非线程安全的。<br />
7、异常处理<br />
有两种类型的异常处理可供选择：/EHa（异步的）和/EHs（同步C++异常）。在以前，如果使用了/EHs，那么在一个catch(…)块中，也许可  能、也许不可能捕捉到结构化异常，因为此行为是没有定义且不可靠的；现在，再使用/EHs时，就可保证不会捕捉到结构化异常。如果想与以前版本的  Visual C++保持一致，并且捕捉异步结构化异常，还是应该在编译时使用/EHa。<br />
8、初始化顺序<br />
以往，如果代码中同时有托管与本地全局变量及对象，那么初始化顺序是不确定的；如代码中存在托管对象与本地对象互操作，就不能保证哪一个对象先初始化了。  现在，Visual Stuio 2005可保证所有的本地全局变量及对象先初始化，然后才初始化托管全局变量及对象。<br />
9、printf<br />
就目前来说，printf中的%n格式化指示符一般用于指定输出的字符个数。这已经确认为一个安全隐患，并且已禁用，但可以使用  set_printf_count_output来启用它；通过传递给set_printf_count_output一个零值（0）可禁用它，而传递任  意一个其他值可再次启用。<br />
10、swprintf函数<br />
为与C++标准保持一致，对swprintf函数也作了修改，现在它已遵循C++标准了。在C++中，通过适当的参数，可实现重载；这个函数的老版本已不再建议使用，因为在C中，是不允许重载的，因此如果使用老格式，将会返回一个错误。<br />
编译器中的突破性变化<br />
除了那些会影响到库的变化之外，也有一些变化会影响到编译器。以下是Visual C++ 2005中编译器的主要变化，需再次提醒的是，此处并没有列出所有的变化，但却是微软公司VC++使用者及内部合作者所确认的关键性变化。<br />
指向成员的指针<br />
在之前的版本中，一个指向成员的指针不需使用取址操作符（&amp;）就能获取，现在，Visual C++  2005已经严格按照标准，必须要使用取址操作符，这也有助于消除潜在的运行时错误。但也导致了MFC库的许多地方需要修改，同时意味着，可能会对现有的  程序造成影响。<br />
范围限制规则<br />
在for循环声明中，默认情况下不强制执行范围限制规则。在之前的版本中，for循环中变量的生命期将会延续到循环之外，为与标准兼容，for循环中定义的变量，现在只限定在for循环内使用。<br />
wchar_t类型<br />
现在，wchar_t已为默认内置类型。这就是说，也许在以前，wchar_t可能会被当作一个unsigned  short，因为它还不是内置类型，所以，当与那些有wchar_t类型变量的文件作符号比较时，很可能会导致问题。在Visual C++  2005中，wchar_t已是一个内置类型，也就是说，需要确定以前对wchar_t的用法不会导致转译为一个unsigned short。<br />
异常处理<br />
为了与库的变化保持一致，编译器已作了一些修改，以便不会捕捉到结构化异常。所以，为与以前代码保持兼容，还是应该使用/EHa。<br />
参数属性<br />
为了提供更健壮的属性&#8211;也是为了代码的健壮性，编译器现在将会检查类型、枚举等等的属性。这意味着，以前的代码可能会在属性方面碰到一个从未有过的编译器错误。<br />
默认为int<br />
为遵循C++标准，对没有类型声明的变量或函数，已不再默认为int类型。但在C语言中仍然可以，C++语言中已不行。这甚至也影响到了微软公司自身的代码，包括NT系统的代码，所以最好的方式，还是显式声明。<br />
关于C的托管代码<br />
C语言编译器一般不可能创建CLR的托管代码，因为C语言不是面向对象的，它不符合CLR所使用的模型，因此，任何以C语言来编译的代码都会与CLR编译器设置冲突。例如，如果在编译时使用/TC设置，而且又设置了CLR，就会导致冲突。<br />
面向CLR的新语法<br />
通过设置/clr编译选项，C++编译器只接受新语法。这将强制推广加入到Visual C++ 2005中的新语法，同时，也会废弃掉老代码。<br />
安全检查<br />
在安全越来越得到重视的今天，安全检查选项/GS，在默认情况下就是打开的，还是有一定道理的。在Visual C++　2005中，默认情况下将会使用/GS选项。<br />
结论:本文列出了微软公司已确认的Visual C++  2005中的一些关键性变化，虽然不是所有的变化，也不是最有可能冲击到代码的变化，但此处所列出的项目，将最有可能导致问题的产生。归根结底，在升级或  用新版编译器对程序作修改之前，必须先试着编译现有程序，以确认代码能通过编译，否则，就不可避免要动手修正源代码中存在的问题。>>> <a href='http://imzc.net/archives/45/' rel="nofollow">More</a></p>						<div class="fixed"></div>
					</div>

					<div class="comments">
						<span>评论关闭</span>											</div>
				</div>

			</div>

	<!-- sidebar START -->
<div id="sidebar">

<!-- Style Switcher START -->
<div class="widget">
	<div id="styleswitcher">
		<span id="style-text">主题风格: </span>
			<span id="style-green" class="color"><a onclick="TSS.setActiveStyleSheet('green');" href="javascript:void(0);" title="将主题风格更换为green"><img src="../../wp-content/themes/elegant-box/images/transparent.gif" alt="" /></a></span>
			<span id="style-purple" class="color"><a onclick="TSS.setActiveStyleSheet('purple');" href="javascript:void(0);" title="将主题风格更换为purple"><img src="../../wp-content/themes/elegant-box/images/transparent.gif" alt="" /></a></span>
			<span id="style-brown" class="color"><a onclick="TSS.setActiveStyleSheet('brown');" href="javascript:void(0);" title="将主题风格更换为brown"><img src="../../wp-content/themes/elegant-box/images/transparent.gif" alt="" /></a></span>
			<span id="style-blue" class="color"><a onclick="TSS.setActiveStyleSheet('blue');" href="javascript:void(0);" title="将主题风格更换为blue"><img src="../../wp-content/themes/elegant-box/images/transparent.gif" alt="" /></a></span>
			<span id="style-white" class="color"><a onclick="TSS.setActiveStyleSheet('white');" href="javascript:void(0);" title="将主题风格更换为white"><img src="../../wp-content/themes/elegant-box/images/transparent.gif" alt="" /></a></span>
			<span id="style-black" class="color"><a onclick="TSS.setActiveStyleSheet('black');" href="javascript:void(0);" title="将主题风格更换为black"><img src="../../wp-content/themes/elegant-box/images/transparent.gif" alt="" /></a></span>
		<div class="fixed"></div>
	</div>
</div>
<!-- Style Switcher END -->

		<!-- showcase -->
		
		<ul id="widgets">

<li class="widget widget_calendar"><h3>Archives</h3><div id="calendar_wrap"><table id="wp-calendar">
	<caption>2012 年七月</caption>
	<thead>
	<tr>
		<th scope="col" title="星期日">日</th>
		<th scope="col" title="星期一">一</th>
		<th scope="col" title="星期二">二</th>
		<th scope="col" title="星期三">三</th>
		<th scope="col" title="星期四">四</th>
		<th scope="col" title="星期五">五</th>
		<th scope="col" title="星期六">六</th>
	</tr>
	</thead>

	<tfoot>
	<tr>
		<td colspan="3" id="prev"><a href="../../archives/date/2012/05/index.html" title="查看 2012 年五月的文章">&laquo; 五</a></td>
		<td class="pad">&nbsp;</td>
		<td colspan="3" id="next" class="pad">&nbsp;</td>
	</tr>
	</tfoot>

	<tbody>
	<tr><td>1</td><td><a href="../../archives/date/2012/07/02/index.html" title="六月随笔">2</a></td><td>3</td><td>4</td><td><a href="../../archives/date/2012/07/05/index.html" title="ruby Rspec测试框架cheetsheet">5</a></td><td>6</td><td>7</td>
	</tr>
	<tr>
		<td>8</td><td><a href="../../archives/date/2012/07/09/index.html" title="linux下STAF执行失败时的处理">9</a></td><td>10</td><td>11</td><td>12</td><td id="today">13</td><td>14</td>
	</tr>
	<tr>
		<td>15</td><td>16</td><td>17</td><td>18</td><td>19</td><td>20</td><td>21</td>
	</tr>
	<tr>
		<td>22</td><td>23</td><td>24</td><td>25</td><td>26</td><td>27</td><td>28</td>
	</tr>
	<tr>
		<td>29</td><td>30</td><td>31</td>
		<td class="pad" colspan="4">&nbsp;</td>
	</tr>
	</tbody>
	</table></div></li><li class="widget widget_categories"><h3>分类目录</h3>		<ul>
	<li class="cat-item cat-item-7"><a href="../../archives/category/c_cplusplus/index.html" title="查看 C/C++ 下的所有文章">C/C++</a>
</li>
	<li class="cat-item cat-item-24"><a href="../../archives/category/ios-dev/index.html" title="查看 IOSDev 下的所有文章">IOSDev</a>
</li>
	<li class="cat-item cat-item-23"><a href="../../archives/category/java/index.html" title="查看 java 下的所有文章">java</a>
</li>
	<li class="cat-item cat-item-5"><a href="../../archives/category/lamp/index.html" title="查看 LAMP 下的所有文章">LAMP</a>
</li>
	<li class="cat-item cat-item-8"><a href="../../archives/category/onthego/index.html" title="查看 OnTheGo 下的所有文章">OnTheGo</a>
</li>
	<li class="cat-item cat-item-1"><a href="../../archives/category/other/index.html" title="查看 Other 下的所有文章">Other</a>
</li>
	<li class="cat-item cat-item-3"><a href="../../archives/category/project/index.html" title="查看 Project 下的所有文章">Project</a>
</li>
	<li class="cat-item cat-item-4"><a href="../../archives/category/rubytesting/index.html" title="查看 Ruby&amp;Testing 下的所有文章">Ruby&amp;Testing</a>
</li>
		</ul>
</li><li class="widget widget_text"><h3>Google Ads</h3>			<div class="textwidget"><script type="text/javascript"><!--
google_ad_client = "ca-pub-7220882232307827";
/* left_180x150, 创建于 09-2-19 */
google_ad_slot = "1136501676";
google_ad_width = 180;
google_ad_height = 150;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
		</li><li class="widget widget_tag_cloud"><h3>标签</h3><div class="tagcloud"><a href='../../archives/tag/c/index.html' class='tag-link-9' title='4 个话题' style='font-size: 22pt;'>c</a>
<a href='../../archives/tag/dailhelper/index.html' class='tag-link-13' title='1 个话题' style='font-size: 8pt;'>dailhelper</a>
<a href='../../archives/tag/linux/index.html' class='tag-link-14' title='1 个话题' style='font-size: 8pt;'>linux</a>
<a href='../../archives/tag/ls/index.html' class='tag-link-10' title='1 个话题' style='font-size: 8pt;'>ls</a>
<a href='../../archives/tag/makefile/index.html' class='tag-link-17' title='1 个话题' style='font-size: 8pt;'>makefile</a>
<a href='../../archives/tag/netkeeper/index.html' class='tag-link-16' title='1 个话题' style='font-size: 8pt;'>Netkeeper</a>
<a href='../../archives/tag/pcap/index.html' class='tag-link-25' title='1 个话题' style='font-size: 8pt;'>pcap</a>
<a href='../../archives/tag/ruby/index.html' class='tag-link-12' title='1 个话题' style='font-size: 8pt;'>ruby</a>
<a href='../../archives/tag/slab/index.html' class='tag-link-20' title='1 个话题' style='font-size: 8pt;'>slab</a>
<a href='../../archives/tag/wget/index.html' class='tag-link-11' title='1 个话题' style='font-size: 8pt;'>wget</a>
<a href='../../archives/tag/系%259F管%2590%2586/index.html' class='tag-link-15' title='1 个话题' style='font-size: 8pt;'>系统管理</a></div>
</li><li class="widget widget_links"><h3>链接表</h3>
	<ul class='xoxo blogroll'>
<li><a href="http://blog.csdn.net/Android_Tutor" rel="colleague" title="Android_Tutor的专栏" target="_blank">Android学习系列</a></li>
<li><a href="http://wpotp.com" rel="me" title="食品找茬网" target="_blank">找茬网</a></li>
<li><a href="http://www.sz95000.com/" title="深圳长途汽车网上订票，官方网站，这次不会忘记了。。。" target="_blank">深圳长途汽车网上订票</a></li>

	</ul>
</li>
<li class="widget widget_meta"><h3>功能</h3>			<ul>
			<li><a href="../../wp-login.php?action=register">注册</a></li>			<li><a href="../../wp-login.php">登录</a></li>
			<li><a href="../../feed/index.html" title="使用 RSS 2.0 订阅本站点内容">文章 <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="../../comments/feed/index.html" title="使用 RSS 订阅本站点的所有文章的近期评论">评论 <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="http://cn.wordpress.org/" title="基于 WordPress，一个优美、先进的个人信息发布平台。">WordPress.org</a></li>
						</ul>
</li>		</ul>

		<!-- showcase 2 -->
		
</div>
<!-- sidebar END -->

	<div class="fixed"></div>

		<div id="bottom">
			<div class="postnav">

					<div class='wp-pagenavi'>
<span class='pages'>第 7 页，共 8 页</span><a href='../../index.html' class='first'>« 最新</a><a href='../6/index.html' class='previouspostslink'>«</a><span class='extend'>...</span><a href='../4/index.html' class='page smaller'>4</a><a href='../5/index.html' class='page smaller'>5</a><a href='../6/index.html' class='page smaller'>6</a><span class='current'>7</span><a href='../8/index.html' class='page larger'>8</a><a href='../8/index.html' class='nextpostslink'>»</a>
</div>	
				<div class="fixed"></div>
			</div>

			<div class="anchor">
				<span><a href="index.html#" onclick="MGJS.goTop();return false;">置顶</a></span>
			</div>
			<div class="fixed"></div>
			</div>
		<div class="fixed"></div>
	</div>
</div>

<!-- footer START -->
<div id="footer">
	<div class="inner">
		<div class="content">
			<p id="about">
				版权所有 &copy; 2008-2012 Only For Sunshine~ | 基于 <a href="http://wordpress.org/">WordPress</a> | 主题由 <a href="http://www.neoease.com/">NeoEase</a> 提供			</p>

			<ul id="admin">
				<li><a href="../../wp-login.php?action=register">注册</a></li>				<li><a href="../../wp-login.php">登录</a></li>
			</ul>

			<div class="fixed"></div>
		</div>
	</div>
</div><!-- footer END --><script type='text/javascript' src='http://s.gravatar.com/js/gprofiles.js?aa&#038;ver=3.4.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type='text/javascript' src='../../wp-content/plugins/jetpack/modules/wpgroho.js?ver=3.4.1'></script>
	<div style="display:none">
	</div>

	<script src="http://stats.wordpress.com/e-201228.js" type="text/javascript"></script>
	<script type="text/javascript">
	st_go({v:'ext',j:'1:1.4.2',blog:'17044931',post:'0'});
	var load_cmc = function(){linktracker_init(17044931,0,2);};
	if ( typeof addLoadEvent != 'undefined' ) addLoadEvent(load_cmc);
	else load_cmc();
	</script><script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-9565349-1']);
  _gaq.push(['_setDomainName', 'imzc.net']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script> 
</body>
</html>
