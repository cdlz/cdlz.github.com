<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head profile="http://gmpg.org/xfn/11">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />

	<title>Only For Sunshine~ - Part 7</title>
	<link rel="alternate" type="application/rss+xml" title="RSS 2.0 - 所有文章" href="../../feed/index.html" />
	<link rel="alternate" type="application/rss+xml" title="RSS 2.0 - 所有评论" href="../../comments/feed/index.html" />
	<link rel="pingback" href="../../xmlrpc.php" />

	<!-- style START -->
	<link rel="stylesheet" href="../../wp-content/themes/elegant-box/style.css" type="text/css" media="screen" />
			<link rel="stylesheet" href="../../wp-content/themes/elegant-box/chinese.css" type="text/css" media="screen" />
		<!--[if IE]>
		<link rel="stylesheet" href="http://imzc.net/wp-content/themes/elegant-box/ie.css" type="text/css" media="screen" />
	<![endif]-->

	<!-- default style -->
			<link rel="stylesheet" href="../../wp-content/themes/elegant-box/styles/blue/default.css" type="text/css" media="screen" title="blue" />
		<link rel="stylesheet" href="../../wp-content/themes/elegant-box/styles/blue/global.css" type="text/css" media="screen" />
	
	<!-- others styles -->
	<link rel="stylesheet" href="../../wp-content/themes/elegant-box/styles/green/default.css" type="text/css" media="screen" title="green" />
	<link rel="stylesheet" href="../../wp-content/themes/elegant-box/styles/green/global.css" type="text/css" media="screen" />
	<link rel="stylesheet" href="../../wp-content/themes/elegant-box/styles/purple/default.css" type="text/css" media="screen" title="purple" />
	<link rel="stylesheet" href="../../wp-content/themes/elegant-box/styles/purple/global.css" type="text/css" media="screen" />
	<link rel="stylesheet" href="../../wp-content/themes/elegant-box/styles/brown/default.css" type="text/css" media="screen" title="brown" />
	<link rel="stylesheet" href="../../wp-content/themes/elegant-box/styles/brown/global.css" type="text/css" media="screen" />
	<link rel="stylesheet" href="../../wp-content/themes/elegant-box/styles/white/default.css" type="text/css" media="screen" title="white" />
	<link rel="stylesheet" href="../../wp-content/themes/elegant-box/styles/white/global.css" type="text/css" media="screen" />
	<link rel="stylesheet" href="../../wp-content/themes/elegant-box/styles/black/default.css" type="text/css" media="screen" title="black" />
	<link rel="stylesheet" href="../../wp-content/themes/elegant-box/styles/black/global.css" type="text/css" media="screen" />
	<!-- style END -->

	<!-- javascript START -->
			<script type="text/javascript" src="../../wp-content/themes/elegant-box/js/styleswitcher.js"></script>
		<script type="text/javascript" src="../../wp-content/themes/elegant-box/js/base.js"></script>
	<script type="text/javascript" src="../../wp-content/themes/elegant-box/js/menu.js"></script>
	<!-- javascript END -->

		<link rel='stylesheet' id='jquery.slimbox-css'  href='../../wp-content/plugins/slimbox/stylesheets/jquery.slimbox.css?ver=2.03' type='text/css' media='all' />
<link rel='stylesheet' id='crayon_style-css'  href='../../wp-content/plugins/crayon-syntax-highlighter/css/crayon_style.css?ver=1.12' type='text/css' media='all' />
<link rel='stylesheet' id='crayon_global_style-css'  href='../../wp-content/plugins/crayon-syntax-highlighter/css/global_style.css?ver=1.12' type='text/css' media='all' />
<link rel='stylesheet' id='crayon_fancybox-css'  href='../../wp-content/plugins/crayon-syntax-highlighter/js/fancybox/jquery.fancybox.css?ver=1.12' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-theme-classic-css'  href='../../wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css?ver=1.12' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-font-monaco-css'  href='../../wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css?ver=1.12' type='text/css' media='all' />
<link rel='stylesheet' id='jetpack-widgets-css'  href='../../wp-content/plugins/jetpack/modules/widgets/widgets.css?ver=20120924' type='text/css' media='all' />
<link rel='stylesheet' id='wp-pagenavi-css'  href='../../wp-content/themes/elegant-box/pagenavi-css.css?ver=2.70' type='text/css' media='all' />
<script type="text/javascript">
var duoshuoQuery = {"short_name":"imzc","sso":{"login":"http:\/\/imzc.net\/wp-login.php?action=duoshuo_login","logout":"http:\/\/imzc.net\/wp-login.php?action=logout&_wpnonce=97849fe663"},"remote_auth":"W10= c53312693e4e0462823cfb00b8476649e4848081 1348969747"};
duoshuoQuery.sso.login += '&redirect_to=' + encodeURIComponent(window.location.href);
duoshuoQuery.sso.logout += '&redirect_to=' + encodeURIComponent(window.location.href);
</script>
<script type='text/javascript' src='../../wp-includes/js/jquery/jquery.js?ver=1.7.2'></script>
<script type='text/javascript' src='../../wp-content/plugins/slimbox/javascript/jquery.slimbox.js?ver=2.03'></script>
<script type='text/javascript' src='../../wp-includes/js/json2.js?ver=2011-02-23'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var live_blogging = {"ajaxurl":"http:\/\/imzc.net\/wp-admin\/admin-ajax.php","update_effect":"top"};
/* ]]> */
</script>
<script type='text/javascript' src='../../wp-content/plugins/live-blogging/live-blogging.js?ver=3.4.2'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var CrayonSyntaxSettings = {"wp_load":"\/var\/www\/html\/wp-load.php","is_admin":"","crayon_wp":"\/var\/www\/html\/wp-content\/plugins\/crayon-syntax-highlighter\/crayon_wp.class.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value"};
/* ]]> */
</script>
<script type='text/javascript' src='../../wp-content/plugins/crayon-syntax-highlighter/js/util.js?ver=1.12'></script>
<script type='text/javascript' src='../../wp-content/plugins/crayon-syntax-highlighter/js/crayon.js?ver=1.12'></script>
<script type='text/javascript' src='../../wp-content/plugins/crayon-syntax-highlighter/js/jquery.popup.js?ver=1.12'></script>
<script type='text/javascript' src='../../wp-content/plugins/crayon-syntax-highlighter/js/fancybox/jquery.fancybox.pack.js?ver=1.12'></script>
<script type='text/javascript' src='../../wp-content/plugins/crayon-syntax-highlighter/js/crayon_admin.js?ver=1.12'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var thickboxL10n = {"next":"\u4e0b\u4e00\u9875 >","prev":"< \u4e0a\u4e00\u9875","image":"\u56fe\u50cf","of":"\/","close":"\u5173\u95ed","noiframes":"\u8fd9\u4e2a\u529f\u80fd\u9700\u8981 iframe \u7684\u652f\u6301\u3002\u60a8\u53ef\u80fd\u7981\u6b62\u4e86 iframe \u7684\u663e\u793a\uff0c\u6216\u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u6b64\u529f\u80fd\u3002","loadingAnimation":"http:\/\/imzc.net\/wp-includes\/js\/thickbox\/loadingAnimation.gif","closeImage":"http:\/\/imzc.net\/wp-includes\/js\/thickbox\/tb-close.png"};
/* ]]> */
</script>
<script type='text/javascript' src='../../wp-includes/js/thickbox/thickbox.js?ver=3.1-20111117'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var CrayonTagEditorSettings = {"url":"http:\/\/imzc.net\/wp-content\/plugins\/crayon-syntax-highlighter\/util\/tag-editor\/crayon_te_content.php","home_url":"http:\/\/imzc.net","css":"crayon-te","used":"1","used_setting":"tinymce-used","ajax_url":"http:\/\/imzc.net\/wp-content\/plugins\/crayon-syntax-highlighter\/util\/ajax.php","css_selected":"crayon-selected","code_css":"#crayon-code","url_css":"#crayon-url","url_info_css":"#crayon-te-url-info","lang_css":"#crayon-lang","title_css":"#crayon-title","mark_css":"#crayon-mark","range_css":"#crayon-range","inline_css":"crayon-inline","inline_hide_css":"crayon-hide-inline","inline_hide_only_css":"crayon-hide-inline-only","hl_css":"#crayon-highlight","switch_html":"#content-html","switch_tmce":"#content-tmce","tinymce_button":"a.mce_crayon_tinymce","submit_css":"#crayon-te-ok","cancel_css":"#crayon-te-cancel","content_css":"#crayon-te-content","dialog_title_css":"#crayon-te-title","submit_wrapper_css":"#crayon-te-submit-wrapper","data_value":"data-value","attr_sep":":","css_sep":"_","fallback_lang":"default","dialog_title_add":"\u63d2\u5165\u4ee3\u7801\u9ad8\u4eae","dialog_title_edit":"\u7f16\u8f91\u4ee3\u7801\u9ad8\u4eae","submit_add":"\u786e\u8ba4\u63d2\u5165","submit_edit":"\u4fdd\u5b58","bar":"#crayon-te-bar","bar_content":"#crayon-te-bar-content","extensions":{"scpt":"applescript","applescript":"applescript","swf":"as","fla":"as","cs":"c#","h":"c++","hh":"c++","hpp":"c++","hxx":"c++","h++":"c++","cc":"c++","cpp":"c++","cxx":"c++","c++":"c++","pas":"delphi","java":"java","class":"java","jar":"java","mv":"miva","mvc":"miva","mvt":"miva","m":"objc","mm":"objc","pl":"perl","py":"python","pyw":"python","pyc":"python","pyo":"python","pyd":"python","rb":"ruby","rbx":"ruby","rhtml":"ruby","vbs":"vb"}};
/* ]]> */
</script>
<script type='text/javascript' src='../../wp-content/plugins/crayon-syntax-highlighter/util/tag-editor/crayon_te.js?ver=1.12'></script>
<script type='text/javascript' src='http://static.duoshuo.com/embed.js'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 3.4.2" />
<link rel='shortlink' href='http://wp.me/19waf' />

<!-- All in One SEO Pack 1.6.15.2 by Michael Torbert of Semper Fi Web Design[343,368] -->
<link rel="canonical" href="index.html" />
<!-- /all in one seo pack -->
<script type="text/javascript">
	jQuery(document).ready(function($){	
	    var select = $('a[href$=".bmp"],a[href$=".gif"],a[href$=".jpg"],a[href$=".jpeg"], a[href$=".png"],a[href$=".BMP"],a[href$=".GIF"],a[href$=".JPG"],a[href$=".JPEG"],a[href$=".PNG"]');
		select.slimbox();
	});
</script>
</head>


<body>
	<!-- header START -->
	<div id="header">
		<div class="inner">
			<div class="content">
				<div class="caption">
					<h1 id="title"><a href="../../index.html" title="-More Thinking,And Then Just do it~~~">Only For Sunshine~</a></h1>
					<div id="tagline">-More Thinking,And Then Just do it~~~</div>
				</div>

				<!-- search box -->
									<form action="http://www.google.com/cse" id="search_box" method="get">
						<div id="searchbox">
							<input type="text" id="searchtxt" class="textfield" name="q" size="24" />
							<input type="hidden" name="cx" value="007838838681523399853:u4canb53vle" />
							<input type="hidden" name="ie" value="UTF-8" />
						</div>
					</form>
				<script type="text/javascript">
//<![CDATA[
	var searchbox = document.getElementById("searchbox");
	var searchtxt = document.getElementById("searchtxt");
	var tiptext = "请输入关键字...";
	if(searchtxt.value == "" || searchtxt.value == tiptext) {
		searchtxt.className += " searchtip";
		searchtxt.value = tiptext;
	}
	searchtxt.onfocus = function(e) {
		if(searchtxt.value == tiptext) {
			searchtxt.value = "";
			searchtxt.className = searchtxt.className.replace(" searchtip", "");
		}
	}
	searchtxt.onblur = function(e) {
		if(searchtxt.value == "") {
			searchtxt.className += " searchtip";
			searchtxt.value = tiptext;
		}
	}
//]]>
</script>

				<!-- navigation START -->
				<ul id="navigation">

					<li class="current_page_item"><a href="../../index.html">首页</a></li>
					<li class="page_item page-item-260"><a href="../../ios/index.html">IOS_PROJ</a></li>
<li class="page_item page-item-164"><a href="../../wp_otp/index.html">WP_OTP</a></li>
<li class="page_item page-item-180"><a href="../../vps-recommended/index.html">vps推荐</a></li>
<li class="page_item page-item-139"><a href="../../mysites/index.html">我的站点</a></li>
<li class="page_item page-item-2"><a href="../../aboutme/index.html">关于</a></li>
					<li id="subscribe">
						<a rel="external nofollow" title="订阅这个博客的文章" id="feed" href="../../feed/index.html"><img src="../../wp-content/themes/elegant-box/images/transparent.gif" alt="RSS 订阅" /></a>
													<ul>
								<li class="first"><a rel="external nofollow" title="订阅到有道" href="http://reader.youdao.com/b.do?url=http://imzc.net/feed/"> 有道</a></li>
								<li><a rel="external nofollow" title="订阅到鲜果" href="http://www.xianguo.com/subscribe.php?url=http://imzc.net/feed/"> 鲜果</a></li>
								<li><a rel="external nofollow" title="订阅到抓虾" href="http://www.zhuaxia.com/add_channel.php?url=http://imzc.net/feed/"> 抓虾</a></li>
								<li><a rel="external nofollow" title="订阅到 Google" href="http://fusion.google.com/add?feedurl=http://imzc.net/feed/">  Google</a></li>
								<li><a rel="external nofollow" title="订阅到 My Yahoo!" href="http://add.my.yahoo.com/rss?url=http://imzc.net/feed/">  My Yahoo!</a></li>
								<li><a rel="external nofollow" title="订阅到 newsgator" href="http://www.newsgator.com/ngs/subscriber/subfext.aspx?url=http://imzc.net/feed/">  newsgator</a></li>
								<li><a rel="external nofollow" title="订阅到 Bloglines" href="http://www.bloglines.com/sub/http://imzc.net/feed/">  Bloglines</a></li>
								<li><a rel="external nofollow" title="订阅到 哪吒" href="http://inezha.com/add?url=http://imzc.net/feed/">  哪吒</a></li>
							</ul>
											</li>

				</ul>
				<!-- navigation END -->

			</div>
		</div>
	</div>
	<!-- header END -->

	<div id="container">
		<div id="content">
			<div id="main">

					<div id="notice">
				<div class="inner">
											<img class="icon" src="../../wp-content/themes/elegant-box/images/transparent.gif" alt="notice" />
										<div class="content">本博客即将迁移到阿里云，备案中。。。新域名： <a href="http://www.devzc.com" >http://www.devzc.com</a>.</div>
					<div class="fixed"></div>
				</div>
			</div>
		
		
				<div class="post">
					<div class="title">
						<h2><a href="../../archives/67/index.html" rel="bookmark">PHP接收wget方式上传文件的处理</a></h2>
						<div class="fixed"></div>
					</div>

					<div class="info">
						
						<span>2010年8月22日</span>
													<span> | 分类: <a href="../../archives/category/lamp/index.html" title="查看 LAMP 中的全部文章" rel="category tag">LAMP</a></span>
																			<span> | 标签: <a href="../../archives/tag/wget/index.html" rel="tag">wget</a></span>
						
						<div class="fixed"></div>
					</div>

					<div class="content">
						<p>有些时候,在linux终端下,可能需要上传文件,这时可以考虑用wget文件上传参数替代.<br />
服务器端,PHP需要特殊处理一下,直接看代码:<br />
[crayon-5067a513d8b94/]>>> <a href='../../archives/67/index.html' rel="nofollow">More</a></p>						<div class="fixed"></div>
					</div>

					<div class="comments">
						<span>评论关闭</span>											</div>
				</div>

		
				<div class="post">
					<div class="title">
						<h2><a href="../../archives/48/index.html" rel="bookmark">【使用Ruby进行Web应用测试系列】二、使用watir组件登陆本博客</a></h2>
						<div class="fixed"></div>
					</div>

					<div class="info">
						
						<span>2010年5月21日</span>
													<span> | 分类: <a href="../../archives/category/rubytesting/index.html" title="查看 Ruby&amp;Testing 中的全部文章" rel="category tag">Ruby&amp;Testing</a></span>
																			<span> | 标签: <a href="../../archives/tag/ruby/index.html" rel="tag">ruby</a></span>
						
						<div class="fixed"></div>
					</div>

					<div class="content">
						<p>由于登录部分有验证码,为了使用方便测试,因此留了一个借口,当通过http请求该页面时,会返回验证码的数字.>>> <a href='../../archives/48/index.html' rel="nofollow">More</a></p>						<div class="fixed"></div>
					</div>

					<div class="comments">
						<span>评论关闭</span>											</div>
				</div>

		
				<div class="post">
					<div class="title">
						<h2><a href="../../archives/49/index.html" rel="bookmark">【使用Ruby进行Web应用测试系列】一、环境搭建</a></h2>
						<div class="fixed"></div>
					</div>

					<div class="info">
						
						<span>2010年5月21日</span>
													<span> | 分类: <a href="../../archives/category/rubytesting/index.html" title="查看 Ruby&amp;Testing 中的全部文章" rel="category tag">Ruby&amp;Testing</a></span>
																			<span> | 标签: </span>
						
						<div class="fixed"></div>
					</div>

					<div class="content">
						<p>WindowsXP下环境搭建:<br />
1.下载Ruby执行文件Ruby 1.8.6 One-Click Installer ,下载到本机后安装(假定目录在C:/Ruby下).>>> <a href='../../archives/49/index.html' rel="nofollow">More</a></p>						<div class="fixed"></div>
					</div>

					<div class="comments">
						<span>评论关闭</span>											</div>
				</div>

		
				<div class="post">
					<div class="title">
						<h2><a href="../../archives/21/index.html" rel="bookmark">error PRJ0003:Error spawning &#8216;cmd.exe&#8217;</a></h2>
						<div class="fixed"></div>
					</div>

					<div class="info">
						
						<span>2009年11月27日</span>
													<span> | 分类: <a href="../../archives/category/c_cplusplus/index.html" title="查看 C/C++ 中的全部文章" rel="category tag">C/C++</a></span>
																			<span> | 标签: </span>
						
						<div class="fixed"></div>
					</div>

					<div class="content">
						<div>
<p>今天用VS2005c++编译一个程序简单的win32 console程序,居然出现&#8221;error PRJ0003:Error spawning &#8216;cmd.exe&#8217; &#8220;错误&#8230;>>> <a href='../../archives/21/index.html' rel="nofollow">More</a></p>						<div class="fixed"></div>
					</div>

					<div class="comments">
						<span>评论关闭</span>											</div>
				</div>

		
				<div class="post">
					<div class="title">
						<h2><a href="../../archives/51/index.html" rel="bookmark">宽带拨号助手V1.3 for CQUPT with winXP</a></h2>
						<div class="fixed"></div>
					</div>

					<div class="info">
						
						<span>2009年11月15日</span>
													<span> | 分类: <a href="../../archives/category/project/index.html" title="查看 Project 中的全部文章" rel="category tag">Project</a></span>
																			<span> | 标签: <a href="../../archives/tag/dailhelper/index.html" rel="tag">dailhelper</a></span>
						
						<div class="fixed"></div>
					</div>

					<div class="content">
						<p><strong>带拨号助手</strong><strong>V1.3(重邮校园网+windowsXP通过)<br />
</strong>richardhc@2009.11.15.>>> <a href='../../archives/51/index.html' rel="nofollow">More</a></p>						<div class="fixed"></div>
					</div>

					<div class="comments">
						<a href="../../archives/51/index.html#comments" title="《宽带拨号助手V1.3 for CQUPT with winXP》上的评论"><span class="ds-thread-count" data-thread-key="51" data-replace="1">1 条评论</span></a>											</div>
				</div>

		
				<div class="post">
					<div class="title">
						<h2><a href="../../archives/68/index.html" rel="bookmark">[转]最完整的sysctl.conf优化方案</a></h2>
						<div class="fixed"></div>
					</div>

					<div class="info">
						
						<span>2009年10月8日</span>
													<span> | 分类: <a href="../../archives/category/lamp/index.html" title="查看 LAMP 中的全部文章" rel="category tag">LAMP</a></span>
																			<span> | 标签: <a href="../../archives/tag/linux/index.html" rel="tag">linux</a>, <a href="../../archives/tag/系%259F管%2590%2586/index.html" rel="tag">系统管理</a></span>
						
						<div class="fixed"></div>
					</div>

					<div class="content">
						<p><a href="http://www.bsdlover.cn/security/2007/1216/article_8.html">http://www.bsdlover.cn/security/2007/1216/article_8.html</a>>>> <a href='../../archives/68/index.html' rel="nofollow">More</a></p>						<div class="fixed"></div>
					</div>

					<div class="comments">
						<span>评论关闭</span>											</div>
				</div>

		
				<div class="post">
					<div class="title">
						<h2><a href="../../archives/22/index.html" rel="bookmark">[转]编写可移植C/C++程序的要点</a></h2>
						<div class="fixed"></div>
					</div>

					<div class="info">
						
						<span>2009年10月8日</span>
													<span> | 分类: <a href="../../archives/category/c_cplusplus/index.html" title="查看 C/C++ 中的全部文章" rel="category tag">C/C++</a></span>
																			<span> | 标签: <a href="../../archives/tag/c/index.html" rel="tag">c</a></span>
						
						<div class="fixed"></div>
					</div>

					<div class="content">
						<div>
<div id="art">
<div>转载时请注明出处和作者联系方式：<a href="http://blog.csdn.net/absurd">http://blog.csdn.net/absurd</a></div>
<div>作者联系方式：Li XianJing &lt;xianjimli at hotmail dot com&gt;</div>
<div>更新时间：2006-3-11</div>
<div>昨天看了05年的《程序员(精华本)》，里面有篇关于编写可移植的C++程序的文章，引起了我一丝兴趣，大致读了一下，有点启发。不过感觉作者是位学院派的人士，没有大型项目的移植经验，把移植想得太简单了，以为一个Adapter模式就搞定了所有的东西，太理想化了。</div>
<div>以前做过两年C++程序移植工作，从Win32平台移植到Linux平台。大约有上百万行C/C++代码，历时一年多。在开发Win32版本  时，已经强调了程序的可植性，无奈Win32团队里对Linux精通的人比较少，很多问题没有想到，直到后来移植工作开始时，才发现移植并非像想的那样简  单。</div>
<div>后来，我发现大家对移植工程师都比较轻视，不管是从工资待遇还是管理层的态度来看都是这样。他们往往认为，你们不过是把别人实现好的东西移植过   去罢了，你老老实实，按步就班去做就行了，根本不需要丝毫创意。事实并非如此，特别是对于大项目，其中遇到的问题和困难可谓一言难尽。比如前面提到的那个  项目，虽然过去好几年了，很多问题我仍然记忆犹新。</div>
<div>这里总结一些经验吧，这些经验，无一不是经过大量汗水换来的，有的引起的BUG甚至耗费数周时间才查出来。写出来，供类似的项目参考，不用再走这些弯路。</div>
<div>1.分层设计，隔离平台相关的代码。就像可测试性一样，可移植性也要从设计抓起。一般来说，最上层和最下层都不具有良好的可移植性。最上层是GUI，大多数GUI都不是跨平台的，如Win32 SDK和MFC。最下层是操作系统API，大多部分操作系统API都是专用的。</div>
<div>如果这两层的代码散布在整个软件中，那么这个软件的可植性将非常的差，这是不言自明的。那么如何避免这种情况呢？当然是分层设计了：</div>
<div>最底层采用Adapter模式，把不同操作系统的API封装成一套统一的接口。至于封装成类还是封装成函数，要看你采用的C还是C++写的程序   了。这看起来很简单，其实不尽然（看完整篇文章后你会明白的），它将耗去你大量的时间去编写代码，去测试它们。采用现存的程序库，是明智的做法，有很多这  样的库，比如，C库有glib（GNOME的基础类），C++库有ACE(ADAPTIVE Communication  Environment)等等，在开发第一个平台时就采用这些库，可以大大减少移植的工作量。</div>
<div>最上层采用MVC模型，分离界面表现与内部逻辑代码。把大部分代码放到内部逻辑里面，界面仅仅是显示和接收输入，即使要换一套GUI，工作量也   不大。这同时也是提高可测试性的手段之一，当然还有其它一些附加好处。所以即使你采用QT或者GTK+等跨平台的GUI设计软件界面，分离界面表现与内部  逻辑也是非常有用的。</div>
<div>若做到了以上两点，程序的可移植性基本上有保障了，其它的只是技术细节问题。</div>
<div>2.事先熟悉各目标平台，合理抽象底层功能。这一点是建立在分层设计之上的，大多数底层函数，像线程、同步机制和IPC机制等等，不同平台提供   的函数，几乎是一一对应的，封装这些函数很简单，实现Adapter的工作几乎只是体力活。然而，对于一些比较特殊的应用，如图形组件本身，就拿GTK+  来说吧，基于X  Window的功能和基于Win32的功能，两者差巨大，除了窗口、事件等基本概念外，几乎没有什么相同的，如果不事先了解各个平台的特性，在设计时就精  心考虑的话，抽象出来的抽口在另外一个平台几乎无法实现。</div>
<div>3.尽量使用标准C/C++函数。大多数平台都会实现POSIX(Portable Operating System  Interface)规定的函数，但这些函数较原生(Native)  函数来说，性能上的表现可能较次一些，用起来也不如原生函数方便。但是，最好不要贪图这种便宜而使用原生函数函数，否则搬起的石头最终会轧到自己的脚。比  如，文件操作就用fopen之类的函数，而不要用CreateFile之类的函数等。</div>
<div>4.尽量不要使用C/C++新标准里出现的特性。并不是所有的编译器都支持这些特性，像VC就不支持C99里面要求的可变参数的宏，VC对一些模板特性的支持也不全面。为了安全起见，这方面不要太激进了。</div>
<div>5.尽量不要使用C/C++标准里没有明确规定的特性。比如你有多个动态库，每个动态库都有全局对象，而且这些全局对象的构造还有依赖关系，那   你迟早会遇到麻烦的，这些全局对象构造的先后顺序在标准里是没有规定的。在一个平台上运行正确，在另外一个平台上可能莫明其妙的死机，最终还是要对程序作  大量修改。</div>
<div>6.尽量不要使用准标准函数。有些函数大多数平台上都有，它们使用得太广泛了，以至于大家都把它们当成标准了，比如atoi（把字符串转换成整  数）、strdup(克隆字符串)、alloca（在栈分配自动内存）等等。不怕一万，就怕万一，除非明白你在做什么，否则还是别碰它们为好。</div>
<div>7.注意标准函数的细节。也许你不相信，即使是标准函数，抛开内部实现不论，就其外在表现的差异也有时令人惊讶。这里略举几个例子：</div>
<div>l         int accept(int s, struct sockaddr *addr, socklen_t  *addrlen);addr/  addrlen本来是输出参数，如果是C++程序员，不管怎么样，你已经习惯于初始化所有的变量，不会有问题。如果是C程序员，就难说了，若没有初始化它  们，程序可能莫名其妙的crash，而你做梦也怀疑不到它头它。这在Win32下没问题，在Linux下才会出现。</div>
<div>l       <span style="color: #ff6600;"> int snprintf(char *str, size_t size, const char *format, &#8230;);第二个参数size，在Win32下不包括空字符在内，在Linux下包括空字符，这一个字符的差异，也可能让你耗上几个小时。</span></div>
<div>l         int stat(const char *file_name, struct stat  *buf);这个函数本身没有问题，问题出在结构stat上，st_ctime在Win32下代表创建(create)时间，在Linux下代表最后修改  (change)时间。</div>
<div>l         FILE *fopen(const char *path, const char *mode);在读取二进制文件，没有什么问题。在读取文本文件可要小心，Win32下自动预处理，读出来的内容与文件实际都长度不一样，在Linux则没有问题。</div>
<div>8.小心数据标准数据类型。不少人已经吃过int类型由16位转变成32位带来的苦头，这已经是陈年往事了，这里且不谈。你可知道char在有  的系统上是有符号的，在有的系统是无符号的吗？你可知道wchar_t在Win32下是16位的，在Linux  下是32位的吗？你可知道有符号的1bit的位域，取值是0和-1而不是0和1吗？这些貌合神离的东东，端的是神出鬼没，一不小心着了它的道。</div>
<div>9.最好不要使用平台独有的特性。比如Win32下DLL可以提供一个DllMain函数，在特定的时间，操作系统的Loader会自动调用这个函数。这类功能很好用，但最好不要用，目标平台可不能保证有这种功能。</div>
<div>10.最好不要使用编译器特有的特性。现代的编译器都做很人性化，考虑得很周到，一些功能用起非常方便。像在VC里，你要实现线程局部存储，你  都不调用TlsGetValue /Tls TlsSetValue之类的函数，在变量前加一个__declspec( thread  )就行了，然而尽管在pthread里有类似的功能，却不能按这种方式实现，所以无法移植到Linux下。同样gcc也有很多扩展，是在VC或者其它编译  器里所没有的。</div>
<div>11.注意平台的特性。比如:</div>
<div>l         在Win32下的DLL里面，除非明确指明为export的函数外，其它函数对外都是不可见的。而在Linux下，所有的非static的全局变量和函数，对外全部是可见的。这要特别小心，同名函数引起的问题，让你查上两天也不为过。</div>
<div>l         目录分隔符，在Win32下用’\\’，在Linux下用’/’。</div>
<div>l         文本文件换行符，在Win32下用’\r\n’，在Linux下用’\n’，在MacOS下用’\r’。</div>
<div>l         字节顺序（大端/小端），不同硬件平台的字节顺序可能不一样。</div>
<div>l         字节对齐，在有的平台(如x86）上，字节不对齐，无非速度慢一点，而有的平台（如arm）上，它完全用错误的方式去读取数据，而且不会给你一点提示。若出问题，可能让你一点头绪都没有。</div>
<div>12.最好清楚不同平台的资源限制。想必你还记得DOS下同时打开的文件个数限制在几十个的情形吧，如今操作系统的功能已经强大多了，但是并非  没有限制。比如Linux下的共享内存默认的最大值是4M。若你对目标平台常见的资源限制了然于胸，可能有很大的帮助，一些问题很容易定位。</div>
<div>可移植性的问题决不限于以上几种，一方面，即使以前遇到过的问题，部份已经忘记了。另外一方面，还有很多未知的问题，根本没有遇到过。这里算是抛砖引玉吧，请大家补充。</div>
</div>
<p><span style="color: #000099;"><strong>原文地址</strong></span> <a href="http://blog.csdn.net/absurd/archive/2006/03/11/622055.aspx" target="_blank">http://blog.csdn.net/absurd/archive/2006/03/11/622055.aspx</a>>>> <a href='../../archives/22/index.html' rel="nofollow">More</a></p>						<div class="fixed"></div>
					</div>

					<div class="comments">
						<span>评论关闭</span>											</div>
				</div>

		
				<div class="post">
					<div class="title">
						<h2><a href="../../archives/52/index.html" rel="bookmark">Netkeeper For Linux(含源码)</a></h2>
						<div class="fixed"></div>
					</div>

					<div class="info">
						
						<span>2009年9月17日</span>
													<span> | 分类: <a href="../../archives/category/project/index.html" title="查看 Project 中的全部文章" rel="category tag">Project</a></span>
																			<span> | 标签: <a href="../../archives/tag/netkeeper/index.html" rel="tag">Netkeeper</a></span>
						
						<div class="fixed"></div>
					</div>

					<div class="content">
						<p>Netkeeper For Linux<br />
=========================================================<br />
+ Netkeeper Linux Login for Ubuntu9.04                                                                              +<br />
+    Generate by zc@imzc.net,http://imzc.net                                                                            +<br />
+    Thanks to yangchen(181158257),韵之飘(59077227).                                                        +<br />
+    重邮Online: http://hongyan.cqupt.edu.cn/cqupt/                                                                 +<br />
=========================================================<br />
Linux 下的 星空拨号支持<br />
基本思路:<br />
1.用xsupplicant实现802内网认证器.<br />
2.用生成动态用户名的配置文件 再调用pppoe拨号,实现外网认证.<br />
系统要求:<br />
安装有ras-pppoe,ubuntu9.04已预装,无需再装.<br />
Ubuntu8.10,ubuntu9.04测试通过.<br />
注意<br />
本程序只能运行在root用户下<br />
Ubuntu请用sudo -s -H命令切换到root用户.>>> <a href='../../archives/52/index.html' rel="nofollow">More</a></p>						<div class="fixed"></div>
					</div>

					<div class="comments">
						<a href="../../archives/52/index.html#comments" title="《Netkeeper For Linux(含源码)》上的评论"><span class="ds-thread-count" data-thread-key="52" data-replace="1">2 条评论</span></a>											</div>
				</div>

		
				<div class="post">
					<div class="title">
						<h2><a href="../../archives/54/index.html" rel="bookmark">小型企业邮局的替代方案&#8211;QQ域名邮箱</a></h2>
						<div class="fixed"></div>
					</div>

					<div class="info">
						
						<span>2009年9月14日</span>
													<span> | 分类: <a href="../../archives/category/lamp/index.html" title="查看 LAMP 中的全部文章" rel="category tag">LAMP</a></span>
																			<span> | 标签: </span>
						
						<div class="fixed"></div>
					</div>

					<div class="content">
						<p>这个说到底便是由腾讯mail服务器来解析我们自己域名的MX(MailExchange)记录,可以减少企业邮局的费用.>>> <a href='../../archives/54/index.html' rel="nofollow">More</a></p>						<div class="fixed"></div>
					</div>

					<div class="comments">
						<span>评论关闭</span>											</div>
				</div>

		
				<div class="post">
					<div class="title">
						<h2><a href="../../archives/55/index.html" rel="bookmark">用了新网关不能上内网的可以试试下面的命令.</a></h2>
						<div class="fixed"></div>
					</div>

					<div class="info">
						
						<span>2009年8月31日</span>
													<span> | 分类: <a href="../../archives/category/onthego/index.html" title="查看 OnTheGo 中的全部文章" rel="category tag">OnTheGo</a></span>
																			<span> | 标签: </span>
						
						<div class="fixed"></div>
					</div>

					<div class="content">
						<p><!--[CDATA[最近学校启用了新的计费系统,看来电信还是动作大啊!移动的什么时候可以到来捏?虽然TD手机现在不好,至少你的上网资费还是要降一下撒!>>> <a href='http://imzc.net/archives/55/' rel="nofollow">More</a></p>						<div class="fixed"></div>
					</div>

					<div class="comments">
						<span>评论关闭</span>											</div>
				</div>

			</div>

	<!-- sidebar START -->
<div id="sidebar">

<!-- Style Switcher START -->
<div class="widget">
	<div id="styleswitcher">
		<span id="style-text">主题风格: </span>
			<span id="style-green" class="color"><a onclick="TSS.setActiveStyleSheet('green');" href="javascript:void(0);" title="将主题风格更换为green"><img src="../../wp-content/themes/elegant-box/images/transparent.gif" alt="" /></a></span>
			<span id="style-purple" class="color"><a onclick="TSS.setActiveStyleSheet('purple');" href="javascript:void(0);" title="将主题风格更换为purple"><img src="../../wp-content/themes/elegant-box/images/transparent.gif" alt="" /></a></span>
			<span id="style-brown" class="color"><a onclick="TSS.setActiveStyleSheet('brown');" href="javascript:void(0);" title="将主题风格更换为brown"><img src="../../wp-content/themes/elegant-box/images/transparent.gif" alt="" /></a></span>
			<span id="style-blue" class="color"><a onclick="TSS.setActiveStyleSheet('blue');" href="javascript:void(0);" title="将主题风格更换为blue"><img src="../../wp-content/themes/elegant-box/images/transparent.gif" alt="" /></a></span>
			<span id="style-white" class="color"><a onclick="TSS.setActiveStyleSheet('white');" href="javascript:void(0);" title="将主题风格更换为white"><img src="../../wp-content/themes/elegant-box/images/transparent.gif" alt="" /></a></span>
			<span id="style-black" class="color"><a onclick="TSS.setActiveStyleSheet('black');" href="javascript:void(0);" title="将主题风格更换为black"><img src="../../wp-content/themes/elegant-box/images/transparent.gif" alt="" /></a></span>
		<div class="fixed"></div>
	</div>
</div>
<!-- Style Switcher END -->

		<!-- showcase -->
		
		<ul id="widgets">

<li class="widget widget_calendar"><h3>Archives</h3><div id="calendar_wrap"><table id="wp-calendar">
	<caption>2012 年九月</caption>
	<thead>
	<tr>
		<th scope="col" title="星期日">日</th>
		<th scope="col" title="星期一">一</th>
		<th scope="col" title="星期二">二</th>
		<th scope="col" title="星期三">三</th>
		<th scope="col" title="星期四">四</th>
		<th scope="col" title="星期五">五</th>
		<th scope="col" title="星期六">六</th>
	</tr>
	</thead>

	<tfoot>
	<tr>
		<td colspan="3" id="prev"><a href="../../archives/date/2012/08/index.html" title="查看 2012 年八月的文章">&laquo; 八</a></td>
		<td class="pad">&nbsp;</td>
		<td colspan="3" id="next" class="pad">&nbsp;</td>
	</tr>
	</tfoot>

	<tbody>
	<tr>
		<td colspan="6" class="pad">&nbsp;</td><td>1</td>
	</tr>
	<tr>
		<td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td><td>8</td>
	</tr>
	<tr>
		<td>9</td><td>10</td><td>11</td><td>12</td><td>13</td><td>14</td><td>15</td>
	</tr>
	<tr>
		<td>16</td><td>17</td><td>18</td><td>19</td><td>20</td><td>21</td><td>22</td>
	</tr>
	<tr>
		<td>23</td><td>24</td><td>25</td><td>26</td><td>27</td><td>28</td><td>29</td>
	</tr>
	<tr>
		<td id="today"><a href="../../archives/date/2012/09/30/index.html" title="站点迁移中。。。">30</a></td>
		<td class="pad" colspan="6">&nbsp;</td>
	</tr>
	</tbody>
	</table></div></li><li class="widget widget_categories"><h3>分类目录</h3>		<ul>
	<li class="cat-item cat-item-7"><a href="../../archives/category/c_cplusplus/index.html" title="查看 C/C++ 下的所有文章">C/C++</a>
</li>
	<li class="cat-item cat-item-24"><a href="../../archives/category/ios-dev/index.html" title="查看 IOSDev 下的所有文章">IOSDev</a>
</li>
	<li class="cat-item cat-item-23"><a href="../../archives/category/java/index.html" title="查看 Java 下的所有文章">Java</a>
</li>
	<li class="cat-item cat-item-5"><a href="../../archives/category/lamp/index.html" title="查看 LAMP 下的所有文章">LAMP</a>
</li>
	<li class="cat-item cat-item-8"><a href="../../archives/category/onthego/index.html" title="查看 OnTheGo 下的所有文章">OnTheGo</a>
</li>
	<li class="cat-item cat-item-1"><a href="../../archives/category/other/index.html" title="查看 Other 下的所有文章">Other</a>
</li>
	<li class="cat-item cat-item-3"><a href="../../archives/category/project/index.html" title="查看 Project 下的所有文章">Project</a>
</li>
	<li class="cat-item cat-item-4"><a href="../../archives/category/rubytesting/index.html" title="查看 Ruby&amp;Testing 下的所有文章">Ruby&amp;Testing</a>
</li>
	<li class="cat-item cat-item-26"><a href="../../archives/category/scriptlanguage/index.html" title="查看 脚本语言 下的所有文章">脚本语言</a>
</li>
		</ul>
</li><li class="widget widget_text"><h3>Google Ads</h3>			<div class="textwidget"><script type="text/javascript"><!--
google_ad_client = "ca-pub-7220882232307827";
/* left_180x150, 创建于 09-2-19 */
google_ad_slot = "1136501676";
google_ad_width = 180;
google_ad_height = 150;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
		</li><li class="widget widget_tag_cloud"><h3>标签</h3><div class="tagcloud"><a href='../../archives/tag/c/index.html' class='tag-link-9' title='4 个话题' style='font-size: 22pt;'>c</a>
<a href='../../archives/tag/dailhelper/index.html' class='tag-link-13' title='1 个话题' style='font-size: 8pt;'>dailhelper</a>
<a href='../../archives/tag/linux/index.html' class='tag-link-14' title='1 个话题' style='font-size: 8pt;'>linux</a>
<a href='../../archives/tag/ls/index.html' class='tag-link-10' title='1 个话题' style='font-size: 8pt;'>ls</a>
<a href='../../archives/tag/makefile/index.html' class='tag-link-17' title='1 个话题' style='font-size: 8pt;'>makefile</a>
<a href='../../archives/tag/netkeeper/index.html' class='tag-link-16' title='1 个话题' style='font-size: 8pt;'>Netkeeper</a>
<a href='../../archives/tag/pcap/index.html' class='tag-link-25' title='1 个话题' style='font-size: 8pt;'>pcap</a>
<a href='../../archives/tag/ruby/index.html' class='tag-link-12' title='1 个话题' style='font-size: 8pt;'>ruby</a>
<a href='../../archives/tag/slab/index.html' class='tag-link-20' title='1 个话题' style='font-size: 8pt;'>slab</a>
<a href='../../archives/tag/wget/index.html' class='tag-link-11' title='1 个话题' style='font-size: 8pt;'>wget</a>
<a href='../../archives/tag/系%259F管%2590%2586/index.html' class='tag-link-15' title='1 个话题' style='font-size: 8pt;'>系统管理</a></div>
</li><li class="widget widget_links"><h3>链接表</h3>
	<ul class='xoxo blogroll'>
<li><a href="http://blog.csdn.net/Android_Tutor" rel="colleague" title="Android_Tutor的专栏" target="_blank">Android学习系列</a></li>
<li><a href="http://ihower.tw/rails3/" title="Rails3学习,写得不错!">Rails3学习</a></li>
<li><a href="http://wpotp.com" rel="me" title="食品找茬网" target="_blank">找茬网</a></li>
<li><a href="http://www.sz95000.com/" title="深圳长途汽车网上订票，官方网站，这次不会忘记了。。。" target="_blank">深圳长途汽车网上订票</a></li>

	</ul>
</li>
<li class="widget widget_meta"><h3>功能</h3>			<ul>
			<li><a href="../../wp-login.php?action=register">注册</a></li>			<li><a href="../../wp-login.php">登录</a></li>
			<li><a href="../../feed/index.html" title="使用 RSS 2.0 订阅本站点内容">文章 <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="../../comments/feed/index.html" title="使用 RSS 订阅本站点的所有文章的近期评论">评论 <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="http://cn.wordpress.org/" title="基于 WordPress，一个优美、先进的个人信息发布平台。">WordPress.org</a></li>
						</ul>
</li>		</ul>

		<!-- showcase 2 -->
		
</div>
<!-- sidebar END -->

	<div class="fixed"></div>

		<div id="bottom">
			<div class="postnav">

					<div class='wp-pagenavi'>
<span class='pages'>第 7 页，共 8 页</span><a href='../../index.html' class='first'>« 最新</a><a href='../6/index.html' class='previouspostslink'>«</a><span class='extend'>...</span><a href='../4/index.html' class='page smaller'>4</a><a href='../5/index.html' class='page smaller'>5</a><a href='../6/index.html' class='page smaller'>6</a><span class='current'>7</span><a href='../8/index.html' class='page larger'>8</a><a href='../8/index.html' class='nextpostslink'>»</a>
</div>	
				<div class="fixed"></div>
			</div>

			<div class="anchor">
				<span><a href="index.html#" onclick="MGJS.goTop();return false;">置顶</a></span>
			</div>
			<div class="fixed"></div>
			</div>
		<div class="fixed"></div>
	</div>
</div>

<!-- footer START -->
<div id="footer">
	<div class="inner">
		<div class="content">
			<p id="about">
				版权所有 &copy; 2008-2012 Only For Sunshine~ | 基于 <a href="http://wordpress.org/">WordPress</a> | 主题由 <a href="http://www.neoease.com/">NeoEase</a> 提供			</p>

			<ul id="admin">
				<li><a href="../../wp-login.php?action=register">注册</a></li>				<li><a href="../../wp-login.php">登录</a></li>
			</ul>

			<div class="fixed"></div>
		</div>
	</div>
</div><!-- footer END --><script type='text/javascript' src='http://s.gravatar.com/js/gprofiles.js?ver=2012Sepaa'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type='text/javascript' src='../../wp-content/plugins/jetpack/modules/wpgroho.js?ver=3.4.2'></script>
	<div style="display:none">
	</div>
<script type='text/javascript'>
/* <![CDATA[ */
var quicktagsL10n = {"wordLookup":"\u8f93\u5165\u5173\u952e\u8bcd\u4ee5\u67e5\u8be2\uff1a","dictionaryLookup":"\u67e5\u5b57\u5178","lookup":"\u67e5\u9605","closeAllOpenTags":"\u5173\u95ed\u6240\u6709\u6253\u5f00\u7684\u6807\u7b7e","closeTags":"\u5173\u95ed\u6807\u7b7e","enterURL":"\u8f93\u5165 URL","enterImageURL":"\u8f93\u5165\u56fe\u50cf URL","enterImageDescription":"\u4e3a\u56fe\u50cf\u8f93\u5165\u63cf\u8ff0","fullscreen":"\u5168\u5c4f","toggleFullscreen":"\u5207\u6362\u5168\u5c4f\u6a21\u5f0f","textdirection":"\u6587\u672c\u65b9\u5411","toggleTextdirection":"\u5207\u6362\u7f16\u8f91\u5668\u6587\u672c\u4e66\u5199\u65b9\u5411"};
/* ]]> */
</script>
<script type='text/javascript' src='../../wp-includes/js/quicktags.js?ver=3.4.2'></script>
<script type='text/javascript' src='../../wp-content/plugins/crayon-syntax-highlighter/util/tag-editor/crayon_qt.js?ver=1.12'></script>
<script type='text/javascript' src='http://s0.wp.com/wp-content/js/devicepx-jetpack.js?ver=201239'></script>

	<script src="http://stats.wordpress.com/e-201239.js" type="text/javascript"></script>
	<script type="text/javascript">
	st_go({v:'ext',j:'1:1.8.1',blog:'17044931',post:'0'});
	var load_cmc = function(){linktracker_init(17044931,0,2);};
	if ( typeof addLoadEvent != 'undefined' ) addLoadEvent(load_cmc);
	else load_cmc();
	</script><script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-9565349-1']);
  _gaq.push(['_setDomainName', 'imzc.net']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script> 
</body>
</html>
